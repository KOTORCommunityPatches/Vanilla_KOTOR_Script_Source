// Could not recompile

struct structtype2 {
	int int1;
	int int3;
	int int5;
	object object1;
	int int7;
	int int9;
	int int11;
	int int13;
	int int15;
	int int17;
};

// Globals
	int intGLOB_1 = 1;
	int intGLOB_2 = 2;
	int intGLOB_3 = 3;
	int intGLOB_4 = 4;
	int intGLOB_5 = 5;
	int intGLOB_6 = 6;
	int intGLOB_7 = 3;
	int intGLOB_8 = 4;
	int intGLOB_9 = 5;
	int intGLOB_10 = 6;
	int intGLOB_11 = 7;
	int intGLOB_12 = 8;
	int intGLOB_13 = 9;
	int intGLOB_14 = 10;
	int intGLOB_15 = 11;
	int intGLOB_16 = 1;
	int intGLOB_17 = 2;
	int intGLOB_18 = 3;
	int intGLOB_19 = 4;
	int intGLOB_20 = 5;
	int intGLOB_21 = 6;
	int intGLOB_22 = 7;
	int intGLOB_23 = 8;
	int intGLOB_24 = 9;
	int intGLOB_25 = 10;
	int intGLOB_26 = 11;
	int intGLOB_27 = 12;
	int intGLOB_28 = 13;
	int intGLOB_29 = 14;
	int intGLOB_30 = 15;
	int intGLOB_31 = 16;
	int intGLOB_32 = 17;
	int intGLOB_33 = 18;
	int intGLOB_34 = 19;
	int intGLOB_35 = 20;
	int intGLOB_36 = 21;
	int intGLOB_37 = 22;
	int intGLOB_38 = 23;
	int intGLOB_39 = 24;
	int intGLOB_40 = 25;
	int intGLOB_41 = 26;
	int intGLOB_42 = 27;
	int intGLOB_43 = 28;
	int intGLOB_44 = 29;
	int intGLOB_45 = 30;
	int intGLOB_46 = 31;
	int intGLOB_47 = 32;
	int intGLOB_48 = 84;
	int intGLOB_49 = 0;
	int intGLOB_50 = 1;
	int intGLOB_51 = 2;
	int intGLOB_52 = 29;
	int intGLOB_53 = 65;
	int intGLOB_54 = 98;
	int intGLOB_55 = 99;
	int intGLOB_56 = 100;
	int intGLOB_57 = 101;
	int intGLOB_58 = 103;
	int intGLOB_59 = 104;
	int intGLOB_60 = 105;
	int intGLOB_61 = 106;
	int intGLOB_62 = 102;
	int intGLOB_63 = 107;
	int intGLOB_64 = 108;
	int intGLOB_65 = 102;
	int intGLOB_66 = 107;
	int intGLOB_67 = 108;
	int intGLOB_68 = 109;
	int intGLOB_69 = 15;
	int intGLOB_70 = 10;
	int intGLOB_71 = 5;
	int intGLOB_72 = 2;
	struct structtype2 structGLOB_1;
	int intGLOB_82 = 1;
	int intGLOB_83 = 2;
	int intGLOB_84 = 3;
	int intGLOB_85 = 20;
	int intGLOB_86 = 21;
	int intGLOB_87 = 22;
	int intGLOB_88 = 23;
	int intGLOB_89 = 24;
	int intGLOB_90 = 25;
	int intGLOB_91 = 26;
	int intGLOB_92 = 27;
	int intGLOB_93 = 28;
	int intGLOB_94 = 66;
	int intGLOB_95 = 67;
	int intGLOB_96 = 68;
	int intGLOB_97 = 69;
	int intGLOB_98 = 70;
	int intGLOB_99 = 71;
	int intGLOB_100 = 72;
	int intGLOB_101 = 73;
	int intGLOB_102 = 74;
	int intGLOB_103 = 75;
	int intGLOB_104 = 76;
	int intGLOB_105 = 77;
	int intGLOB_106 = 78;
	int intGLOB_107 = 79;
	int intGLOB_108 = 80;
	int intGLOB_109 = 81;
	int intGLOB_110 = 82;
	int intGLOB_111 = 83;
	int intGLOB_112 = 85;
	int intGLOB_113 = 86;
	int intGLOB_114 = 87;
	int intGLOB_115 = 88;
	int intGLOB_116 = 89;
	int intGLOB_117 = 90;
	int intGLOB_118 = 91;
	int intGLOB_119 = 92;
	int intGLOB_120 = 94;
	int intGLOB_121 = 95;
	int intGLOB_122 = 96;
	int intGLOB_123 = 97;
	int intGLOB_124 = 1;
	int intGLOB_125 = 2;
	int intGLOB_126 = 3;
	int intGLOB_127 = 4;
	int intGLOB_128 = 5;

// Prototypes
void sub106();
void sub105(int intParam1);
void sub104(object objectParam1);
void sub103(int intParam1);
void sub102(string stringParam1, int intParam2, int intParam3, float floatParam4);
void sub101();
int sub100(int intParam1, int intParam2);
int sub99(object objectParam1, int intParam2);
void sub98();
void sub97();
int sub96();
int sub95();
int sub94(int intParam1);
int sub93(int intParam1);
int sub92(float floatParam1);
int sub91(object objectParam1);
int sub90();
int sub89(int intParam1);
int sub88(int intParam1);
object sub87(object objectParam1);
int sub86();
int sub85();
int sub84(int intParam1);
int sub83(float floatParam1);
int sub82(int intParam1);
int sub81(int intParam1);
void sub80(object objectParam1);
int sub79(int intParam1);
talent sub78(object objectParam1, talent talentParam2);
int sub77(int intParam1);
int sub76(int intParam1);
int sub75(int intParam1);
string sub74(int intParam1);
int sub73();
int sub72();
int sub71();
int sub70();
int sub69();
int sub68();
int sub67();
int sub66();
int sub65();
int sub64();
int sub63();
int sub62();
int sub61();
int sub60();
int sub59();
int sub58();
int sub57();
int sub56(int intParam1);
int sub55(int intParam1);
int sub54();
int sub53();
int sub52();
int sub51();
int sub50();
int sub49();
int sub48();
int sub47();
int sub46();
int sub45();
int sub44();
int sub43();
int sub42();
int sub41();
int sub40();
int sub39();
int sub38();
talent sub37(int intParam1);
int sub36(object objectParam1);
talent sub35(int intParam1);
object sub34();
int sub33(object objectParam1);
talent sub32(object objectParam1, talent talentParam2);
talent sub31(object objectParam1, talent talentParam2);
int sub30();
object sub29();
int sub28();
talent sub27(int intParam1);
talent sub26(int intParam1);
talent sub25(int intParam1);
talent sub24(int intParam1, int intParam2);
int sub23(object objectParam1, float floatParam2);
int sub22(object objectParam1, float floatParam2);
object sub21();
int sub20();
int sub19(object objectParam1);
int sub18();
object sub17(int intParam1);
int sub16();
int sub15(int intParam1, object objectParam2);
object sub14();
int sub13(int intParam1);
int sub12();
int sub11();
void sub10(int intParam1, int intParam2);
string sub9(int intParam1);
int sub8();
int sub7(int intParam1);
string sub6(object objectParam1);
void sub5();
string sub4(object objectParam1);
void sub3(string stringParam1);
void sub2(int intParam1);
void sub1(object objectParam1, int intParam2);

void sub106() {
	string string1;
	int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_51);
	if ((nLocal > 0)) {
		string string2;
		if ((nLocal < 10)) {
			string2 = ("0" + IntToString(nLocal));
		}
		else {
			string2 = IntToString(nLocal);
		}
		string1 = ("WP_" + string2);
	}
	else {
		string1 = ("WP_" + GetTag(OBJECT_SELF));
	}
	int int3 = 1;
	string string6 = (string1 + "_01");
	object oWP = GetWaypointByTag(string6);
	while (GetIsObjectValid(oWP)) {
		(int3++);
		if ((int3 < 10)) {
			string6 = ((string1 + "_0") + IntToString(int3));
		}
		else {
			string6 = ((string1 + "_") + IntToString(int3));
		}
		oWP = GetWaypointByTag(string6);
	}
	int3 = (int3 - 1);
	if ((int3 > 0)) {
		SetLocalNumber(OBJECT_SELF, intGLOB_50, int3);
	}
}

void sub105(int intParam1) {
	SetLocalNumber(OBJECT_SELF, intGLOB_51, intParam1);
}

void sub104(object objectParam1) {
	AssignCommand(objectParam1, sub10(intGLOB_58, 1));
	AssignCommand(objectParam1, sub10(intGLOB_67, 1));
	AssignCommand(objectParam1, sub105(2));
	AssignCommand(objectParam1, sub106());
	AssignCommand(objectParam1, sub98());
}

void sub103(int intParam1) {
	int int1;
	object oNpc_ond_soldi001;
	int1 = 0;
	while ((int1 < 6)) {
		{
			string string1;
			string string2;
			string1 = ("sp_riot_guard" + IntToString((int1 + 1)));
			string2 = ("wp_riot_guard" + IntToString((int1 + 1)));
			oNpc_ond_soldi001 = CreateObject(1, "npc_ond_soldi001", GetLocation(GetObjectByTag(string1, 0)), 0);
			AssignCommand(oNpc_ond_soldi001, ActionMoveToObject(GetObjectByTag(string2, 0), 1, 1.0));
			if (intParam1) {
				AssignCommand(oNpc_ond_soldi001, ActionDoCommand(ChangeToStandardFaction(oNpc_ond_soldi001, 1)));
			}
			else {
				AssignCommand(oNpc_ond_soldi001, ActionDoCommand(ChangeToStandardFaction(oNpc_ond_soldi001, 2)));
			}
		}
		(int1++);
	}
}

void sub102(string stringParam1, int intParam2, int intParam3, float floatParam4) {
}

void sub101() {
	int nRandom = d8(1);
	if ((nRandom == 1)) {
		ActionPlayAnimation(103, 1.0, 0.0);
	}
	else {
		if ((nRandom == 2)) {
			ActionPlayAnimation(102, 1.0, 0.0);
		}
		else {
			if ((nRandom == 3)) {
				ActionPlayAnimation(1, 1.0, 3.0);
			}
			else {
				if ((((nRandom == 4) || (nRandom == 5)) && (GetRacialType(OBJECT_SELF) != 5))) {
					if ((GetGender(OBJECT_SELF) == 0)) {
						sub10(intGLOB_52, 0);
						ActionPlayAnimation(24, 1.0, 20.4);
						ActionDoCommand(sub10(intGLOB_52, 1));
					}
					else {
						if ((GetGender(OBJECT_SELF) == 1)) {
							sub10(intGLOB_52, 0);
							ActionPlayAnimation(24, 1.0, 13.3);
							ActionDoCommand(sub10(intGLOB_52, 1));
						}
					}
				}
				else {
					if ((((nRandom == 6) || (nRandom == 4)) || (nRandom == 5))) {
						ActionPlayAnimation(100, 1.0, 0.0);
					}
					else {
						if ((nRandom == 7)) {
							ActionPlayAnimation(101, 1.0, 0.0);
						}
						else {
							if ((nRandom == 8)) {
								sub10(intGLOB_52, 0);
								ActionPlayAnimation(1, 1.0, 5.0);
								ActionDoCommand(sub10(intGLOB_52, 1));
							}
						}
					}
				}
			}
		}
	}
}

int sub100(int intParam1, int intParam2) {
	int int1;
	int int2 = sub7(intGLOB_60);
	if (((intParam1 == intParam2) && (int2 == 0))) {
		int1 = (-1);
		sub10(intGLOB_60, 1);
	}
	else {
		if (((intParam2 == 1) && (int2 == 1))) {
			int1 = 1;
			sub10(intGLOB_60, 0);
		}
		else {
			if ((int2 == 0)) {
				int1 = 1;
			}
			else {
				if ((int2 == 1)) {
					int1 = (-1);
				}
			}
		}
	}
	return int1;
}

int sub99(object objectParam1, int intParam2) {
	string string1;
	string string2;
	object object1 = OBJECT_INVALID;
	float float1 = 0.0;
	int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_51);
	if ((nLocal > 0)) {
		string string3;
		if ((nLocal < 10)) {
			string3 = ("0" + IntToString(nLocal));
		}
		else {
			string3 = IntToString(nLocal);
		}
		string2 = ("WP_" + string3);
	}
	else {
		string2 = ("WP_" + GetTag(objectParam1));
	}
	int int3 = 1;
	int int4 = 0;
	string string7 = (string2 + "_01");
	object oWP = GetWaypointByTag(string7);
	float fDistance = 0.0;
	while (GetIsObjectValid(oWP)) {
		fDistance = GetDistanceBetween(objectParam1, oWP);
		if ((float1 == 0.0)) {
			float1 = fDistance;
			object1 = oWP;
			int4 = int3;
		}
		else {
			if ((fDistance < float1)) {
				float1 = fDistance;
				object1 = oWP;
				int4 = int3;
			}
		}
		(++int3);
		if ((int3 < 10)) {
			string7 = ((string2 + "_0") + IntToString(int3));
		}
		else {
			string7 = ((string2 + "_") + IntToString(int3));
		}
		oWP = GetWaypointByTag(string7);
	}
	return int4;
}

void sub98() {
	if ((!sub7(intGLOB_61))) {
		string string1 = "POST_";
		string string2 = "WP_";
		string string3;
		int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_49);
		int int4 = GetLocalNumber(OBJECT_SELF, intGLOB_50);
		int int6 = GetLocalNumber(OBJECT_SELF, intGLOB_51);
		if (((nLocal < 10) && (nLocal > 0))) {
			string3 = ("0" + IntToString(nLocal));
		}
		else {
			if ((nLocal == 0)) {
				if (sub7(intGLOB_58)) {
					nLocal = (Random(int4) + 1);
					if ((nLocal < 10)) {
						string3 = ("0" + IntToString(nLocal));
					}
					else {
						string3 = IntToString(nLocal);
					}
				}
				else {
					if (sub7(intGLOB_54)) {
						int int11 = sub99(OBJECT_SELF, int6);
						if (((int11 > 0) && (int11 < 10))) {
							string3 = ("0" + IntToString(int11));
						}
						else {
							if ((int11 >= 10)) {
								string3 = IntToString(int11);
							}
							else {
								string3 = "01";
							}
						}
						nLocal = int11;
					}
					else {
						string3 = "01";
					}
				}
			}
			else {
				if ((nLocal < 10)) {
					string3 = ("0" + IntToString(nLocal));
				}
				else {
					string3 = IntToString(nLocal);
				}
			}
		}
		string string11;
		string string12;
		if ((int6 > 0)) {
			string string13;
			if ((int6 < 10)) {
				string13 = ("0" + IntToString(int6));
			}
			else {
				string13 = IntToString(int6);
			}
			string12 = ((string2 + string13) + "_02");
		}
		else {
			string12 = ((string2 + GetTag(OBJECT_SELF)) + "_02");
		}
		object oWP = GetWaypointByTag(string12);
		if (((int4 == 0) && GetIsObjectValid(oWP))) {
		}
		if (GetIsObjectValid(oWP)) {
			int nLen = GetStringLength(string12);
			string11 = (GetStringLeft(string12, (nLen - 2)) + string3);
		}
		else {
			string2 = "UNKNOWN";
			string11 = (string1 + GetTag(OBJECT_SELF));
		}
		object object3 = GetWaypointByTag(string11);
		int int17 = sub7(intGLOB_59);
		float fPersonalSpace = GetObjectPersonalSpace(OBJECT_SELF);
		fPersonalSpace = (fPersonalSpace + 0.1);
		if ((GetDistanceToObject2D(object3) <= fPersonalSpace)) {
			int int19;
			if (sub7(intGLOB_58)) {
				nLocal = (Random(int4) + 1);
			}
			else {
				if ((nLocal < int4)) {
					int19 = sub100(int4, nLocal);
					nLocal = (nLocal + int19);
				}
				else {
					if ((nLocal == int4)) {
						int19 = sub100(int4, nLocal);
						if (sub7(intGLOB_55)) {
							sub10(intGLOB_61, 1);
						}
						else {
							if (sub7(intGLOB_56)) {
								nLocal = 1;
								sub10(intGLOB_60, 0);
							}
							else {
								nLocal = (nLocal + int19);
							}
						}
					}
				}
			}
		}
		if (GetIsObjectValid(GetWaypointByTag(string11))) {
			int nRandom;
			if (sub7(intGLOB_62)) {
				nRandom = 3;
			}
			else {
				if (sub7(intGLOB_63)) {
					nRandom = (d3(1) + 3);
				}
				else {
					if (sub7(intGLOB_64)) {
						nRandom = d10(1);
					}
					else {
						nRandom = 0;
					}
				}
			}
			float float4 = (GetDistanceBetween2D(GetWaypointByTag(string11), OBJECT_SELF) / 1.25);
			if ((float4 < 30.0)) {
				float4 = 30.0;
			}
			ActionForceMoveToObject(object3, sub7(intGLOB_59), fPersonalSpace, float4);
			if (sub7(intGLOB_52)) {
				ActionDoCommand(sub101());
			}
			SetLocalNumber(OBJECT_SELF, intGLOB_49, nLocal);
			if ((string2 != "UNKNOWN")) {
				if ((nRandom > 0)) {
					object object7 = GetWaypointByTag(string11);
					float fFacing = GetFacing(object7);
					ActionDoCommand(SetFacing(fFacing));
					if (sub7(intGLOB_68)) {
						ActionPlayAnimation(GetLocalNumber(OBJECT_SELF, 29), 1.0, IntToFloat(nRandom));
					}
					else {
						ActionWait(IntToFloat(nRandom));
					}
				}
				ActionDoCommand(sub98());
			}
		}
	}
}

void sub97() {
	int int1 = sub95();
}

int sub96() {
	sub3("GENERIC DEBUG *************** Start Commoner AI");
	object oNearest = GetNearestCreature(3, 1, OBJECT_SELF, 1, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
	object object3;
	int int1 = 1;
	int int2 = 1;
	object object4 = GetNearestCreature(3, 2, OBJECT_SELF, 1, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
	while ((GetIsObjectValid(object4) && (int1 == 1))) {
		if ((((GetStandardFaction(object4) == 1) || (GetStandardFaction(object4) == 3)) || (GetStandardFaction(object4) == 6))) {
			if ((GetDistanceBetween(OBJECT_SELF, object4) <= 20.0)) {
				object3 = object4;
				int1 = 0;
			}
			(int2++);
			object4 = GetNearestCreature(3, 2, OBJECT_SELF, int2, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
		}
		else {
			(int2++);
			object4 = GetNearestCreature(3, 2, OBJECT_SELF, int2, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
		}
	}
	if (GetIsObjectValid(oNearest)) {
		sub3("GENERIC DEBUG *************** Clear 2710");
		ClearAllActions();
		ActionMoveAwayFromObject(oNearest, 1, 20.0);
		DelayCommand(0.2, ActionDoCommand(sub97()));
		return 1;
	}
	else {
		if (GetIsObjectValid(object3)) {
			sub3(("GENERIC DEBUG *************** Object Flee = " + sub4(object3)));
			sub3("GENERIC DEBUG *************** Clear 2720");
			ClearAllActions();
			ActionMoveAwayFromObject(object3, 1, 20.0);
			DelayCommand(0.2, ActionDoCommand(sub97()));
			return 1;
		}
	}
	return 0;
}

int sub95() {
	sub3(("GENERIC DEBUG *************** Post DCR Checks for " + sub4(OBJECT_SELF)));
	if ((sub7(intGLOB_112) && (!sub7(intGLOB_113)))) {
		if (sub96()) {
			return 1;
		}
	}
	else {
		if (sub7(intGLOB_113)) {
			sub3("GENERIC DEBUG *************** Clear 1000");
			ClearAllActions();
			return 1;
		}
	}
	if (((!IsObjectPartyMember(OBJECT_SELF)) && (sub7(intGLOB_61) == 1))) {
		sub3("GENERIC DEBUG *************** Clear 1100");
		ClearAllActions();
		DelayCommand(1.0, sub98());
		return 1;
	}
	else {
		if ((((GetPartyMemberByIndex(0) != OBJECT_SELF) && (!GetIsObjectValid(GetNearestCreature(3, 1, OBJECT_SELF, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF)))) && IsObjectPartyMember(OBJECT_SELF))) {
			object oNPC = GetPartyMemberByIndex(0);
			object oTarget = GetAttackTarget(oNPC);
			if ((!GetSoloMode())) {
				if ((((GetObjectType(oTarget) == 8) && (!GetIsOpen(oTarget))) && (!GetSoloMode()))) {
					ClearAllActions();
					ActionFollowLeader();
				}
				else {
					if ((((GetObjectType(oTarget) == 64) && (GetCurrentHitPoints(oTarget) > 0)) && (!GetSoloMode()))) {
						ClearAllActions();
						ActionFollowLeader();
					}
					else {
						sub102("NO TARGET: FOLLOW LEADER", 10, 10, 4.0);
						CancelCombat(OBJECT_SELF);
						sub3("GENERIC DEBUG *************** Clear 1200");
						ClearAllActions();
						ActionFollowLeader();
					}
				}
			}
			return 1;
		}
	}
	return 0;
}

int sub94(int intParam1) {
	AurPostString("Monster Powers AI Routine", 5, 4, 3.0);
	talent talRandom = GetCreatureTalentRandom(4868, OBJECT_SELF, 0);
	if ((d100(1) < 20)) {
		if ((GetIsTalentValid(talRandom) && GetCreatureHasTalent(talRandom, OBJECT_SELF))) {
			if ((GetIsObjectValid(intParam1) && GetIsEnemy(intParam1, OBJECT_SELF))) {
				sub3("GENERIC DEBUG *************** Using Talent on Intruder Target");
				ActionUseTalentOnObject(talRandom, intParam1);
				return 1;
			}
			else {
				object oNearest = GetNearestCreature(3, 1, OBJECT_SELF, 1, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
				if (GetIsObjectValid(oNearest)) {
					sub3("GENERIC DEBUG *************** Using Talent on Determined Target");
					ActionUseTalentOnObject(talRandom, oNearest);
					return 1;
				}
			}
		}
	}
	return 0;
}

int sub93(int intParam1) {
	if ((!GetIsPuppet(OBJECT_SELF))) {
		sub33(intParam1);
		return 0;
	}
	object oPUPOwner = GetPUPOwner(OBJECT_SELF);
	if ((!GetIsObjectValid(oPUPOwner))) {
		return 0;
	}
	if ((GetCurrentHitPoints(oPUPOwner) < 1)) {
		ClearAllActions();
		return 0;
	}
	object object3 = OBJECT_INVALID;
	int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_12);
	int int7 = (Random(200) % 2);
	if (((nLocal > 0) && (int7 == 1))) {
		int int9 = 0;
		int9 = 0;
		while ((int9 < 3)) {
			{
				object oNPC = GetPartyMemberByIndex(int9);
				if (GetIsObjectValid(oNPC)) {
				if ((GetRacialType(oNPC) == 5)) {
					int nCurHP = GetCurrentHitPoints(oNPC);
					int nMaxHP = GetMaxHitPoints(oNPC);
					int int16 = ((nCurHP * 100) / nMaxHP);
					if (((int16 < nLocal) && (nCurHP > 0))) {
						AurPostString(((("Found wounded droid in party:" + IntToString(int16)) + "/") + IntToString(nLocal)), 20, 21, 4.0);
						if ((GetDistanceToObject2D(oNPC) <= 10.0)) {
							object3 = oNPC;
						}
					}
				}
				}
			}
			(++int9);
		}
		if (GetIsObjectValid(object3)) {
			ClearAllActions();
			int int18 = GetLocalNumber(OBJECT_SELF, intGLOB_13);
			if ((int18 < 1)) {
				int18 = 10;
			}
			SetFacingPoint(GetPosition(object3));
			int int20 = GetCurrentHitPoints(object3);
			int int22 = GetMaxHitPoints(object3);
			if (((int22 - int20) < int18)) {
				int18 = (int22 - int20);
			}
			effect efHeal = EffectHeal(int18);
			ApplyEffectToObject(0, efHeal, object3, 0.0);
			effect efBeam = EffectBeam(2052, OBJECT_SELF, 0, 0);
			ApplyEffectToObject(1, efBeam, object3, 1.0);
			effect efVisual = EffectVisualEffect(1048, 0);
			ApplyEffectToObject(1, efVisual, object3, 3.0);
			return 0;
		}
	}
	if ((!GetIsInCombat(oPUPOwner, 0))) {
		return 0;
	}
	object oLastTarget = GetLastHostileTarget(oPUPOwner);
	if ((GetIsObjectValid(oLastTarget) && GetObjectSeen(oLastTarget, OBJECT_SELF))) {
		ActionAttack(oLastTarget, 0);
	}
	return 0;
}

int sub92(float floatParam1) {
	if ((!GetIsPuppet(OBJECT_SELF))) {
		return 0;
	}
	object oPUPOwner = GetPUPOwner(OBJECT_SELF);
	if ((!GetIsObjectValid(oPUPOwner))) {
		AurPostString("PUPAI - Unable to find owner. Major error", 20, 30, 5.0);
		return 0;
	}
	float fDistance = GetDistanceToObject2D(oPUPOwner);
	if ((fDistance <= floatParam1)) {
		return 0;
	}
	int nAction = GetCurrentAction(OBJECT_SELF);
	if (((nAction == 0) || (nAction == 43))) {
		return 1;
	}
	ClearAllActions();
	ActionFollowOwner(2.0);
	return 1;
}

int sub91(object objectParam1) {
	if ((GetLevelByClass(4, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(3, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(5, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(11, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(12, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(13, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(14, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(15, OBJECT_SELF) > 0)) {
		return 1;
	}
	if ((GetLevelByClass(16, OBJECT_SELF) > 0)) {
		return 1;
	}
	return 0;
}

int sub90() {
	int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_12);
	if ((nLocal > 0)) {
		(nLocal--);
		SetLocalNumber(OBJECT_SELF, intGLOB_12, nLocal);
		object oRWeapItem = GetItemInSlot(4, OBJECT_SELF);
		int int3 = 0;
		if (GetIsObjectValid(oRWeapItem)) {
			int3 = sub77(GetBaseItemType(oRWeapItem));
		}
		if ((int3 == 2)) {
			object oRWeap2Item = GetItemInSlot(18, OBJECT_SELF);
			int int7 = 0;
			if (GetIsObjectValid(oRWeap2Item)) {
				int7 = sub77(GetBaseItemType(oRWeap2Item));
			}
			if ((int7 != 2)) {
				ClearAllActions();
				ActionSwitchWeapons();
				return 1;
			}
		}
	}
	else {
		object object5 = GetItemInSlot(4, OBJECT_SELF);
		int int11 = 0;
		if (GetIsObjectValid(object5)) {
			int11 = sub77(GetBaseItemType(object5));
		}
		if ((int11 != 2)) {
			object object7 = GetItemInSlot(18, OBJECT_SELF);
			int int15 = 0;
			if (GetIsObjectValid(object7)) {
				int15 = sub77(GetBaseItemType(object7));
			}
			if ((int15 == 2)) {
				ClearAllActions();
				ActionSwitchWeapons();
				return 1;
			}
		}
	}
	return 0;
}

int sub89(int intParam1) {
	if ((!IsObjectPartyMember(OBJECT_SELF))) {
		return 0;
	}
	object oLeader = GetPartyLeader();
	if ((OBJECT_SELF == oLeader)) {
		return 0;
	}
	if ((GetCurrentHitPoints(OBJECT_SELF) < 1)) {
		return 0;
	}
	if (sub90()) {
		return 0;
	}
	sub33(intParam1);
	return 0;
}

int sub88(int intParam1) {
	int nLocal = GetLocalNumber(OBJECT_SELF, 15);
	if ((GetCurrentHitPoints(OBJECT_SELF) < 5)) {
		return 1;
	}
	if ((nLocal > 30)) {
		AurPostString("Turtle Special Attack", 5, 7, 5.0);
		nLocal = (nLocal / 3);
		effect efNext = GetFirstEffect(OBJECT_SELF);
		while (GetIsEffectValid(efNext)) {
			if ((GetEffectType(efNext) == 30)) {
				DelayCommand(0.1, RemoveEffect(OBJECT_SELF, efNext));
			}
			else {
				if ((GetEffectType(efNext) == 27)) {
					DelayCommand(0.1, RemoveEffect(OBJECT_SELF, efNext));
				}
				else {
					if ((GetEffectType(efNext) == 75)) {
						DelayCommand(0.1, RemoveEffect(OBJECT_SELF, efNext));
					}
				}
			}
			efNext = GetNextEffect(OBJECT_SELF);
		}
		ClearAllActions();
		DelayCommand(0.3, ActionPlayAnimation(107, 1.0, 1.0));
		int int8 = 0;
		while ((int8 < 3)) {
			{
				object oNPC = GetPartyMemberByIndex(int8);
				if ((GetDistanceBetween(OBJECT_SELF, oNPC) < 10.0)) {
					DelayCommand(1.0, ApplyEffectToObject(0, EffectDamage(nLocal, 8, 0), oNPC, 0.0));
				}
			}
			(int8++);
		}
		DelayCommand(1.0, ApplyEffectToObject(1, EffectVisualEffect(6002, 0), GetFirstPC(), 2.0));
		SetLocalNumber(OBJECT_SELF, 15, 0);
	}
	else {
		AurPostString("Turtle Paralyzed Code.", 5, 6, 4.0);
		ClearAllActions();
		int int9 = 1;
		effect effect6 = GetFirstEffect(OBJECT_SELF);
		while (GetIsEffectValid(effect6)) {
			if ((GetEffectType(effect6) == 30)) {
				int9 = 0;
			}
			effect6 = GetNextEffect(OBJECT_SELF);
		}
		if (int9) {
			DelayCommand(3.0, ActionDoCommand(ApplyEffectToObject(1, EffectSleep(), OBJECT_SELF, 100.0)));
			DelayCommand(3.0, ActionDoCommand(ApplyEffectToObject(1, EffectParalyze(), OBJECT_SELF, 100.0)));
		}
	}
	return 1;
}

object sub87(object objectParam1) {
	sub3("GENERIC DEBUG *************** Starting: Determine Attack Target");
	int nStyle = GetPartyAIStyle();
	int nNPCStyle = GetNPCAIStyle(OBJECT_SELF);
	object object1;
	object oLastTarget = GetLastHostileTarget(OBJECT_SELF);
	sub3(((("GENERIC DEBUG *************** Intruder = " + IntToString(GetIsObjectValid(objectParam1))) + " Last Target = ") + IntToString(GetIsObjectValid(oLastTarget))));
	if (((GetIsObjectValid(objectParam1) && (!GetIsDead(objectParam1))) && (!GetIsDebilitated(objectParam1)))) {
		sub3(("GENERIC DEBUG *************** Intruder Target Returned = " + ObjectToString(objectParam1)));
		return objectParam1;
	}
	else {
		if (((GetIsObjectValid(oLastTarget) && (!GetIsDead(oLastTarget))) && (!GetIsDebilitated(oLastTarget)))) {
			sub3(("GENERIC DEBUG *************** Last Target Returned = " + ObjectToString(objectParam1)));
			return oLastTarget;
		}
		else {
			if ((nStyle == 0)) {
				int int13 = 1;
				sub3("GENERIC DEBUG *************** Getting nearest target - 249");
				object oNearest = GetNearestCreature(3, 1, OBJECT_SELF, int13, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
				object1 = oNearest;
				while (((!GetIsDebilitated(object1)) && GetIsObjectValid(object1))) {
					(int13++);
					object1 = GetNearestCreature(3, 1, OBJECT_SELF, int13, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
				}
				if (((!GetIsObjectValid(object1)) && GetIsObjectValid(oNearest))) {
					object1 = oNearest;
				}
			}
			else {
				if ((nStyle == 1)) {
					int int18 = 0;
					object oLastActor;
					while (((!GetIsObjectValid(oLastActor)) && (int18 < 3))) {
						oLastActor = GetLastHostileActor(GetPartyMemberByIndex(int18));
						(int18++);
					}
					if (GetIsObjectValid(oLastActor)) {
						sub3("GENERIC DEBUG *************** Getting nearest target - 262");
						object1 = GetNearestCreature(3, 1, OBJECT_SELF, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
					}
					else {
						oLastActor = GetLastHostileTarget(GetPartyMemberByIndex(0));
						if (GetIsObjectValid(oLastActor)) {
							sub3("GENERIC DEBUG *************** Getting nearest target - 269");
							object1 = GetNearestCreature(3, 1, OBJECT_SELF, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
						}
					}
				}
				else {
					if ((nStyle != 2)) {
						sub3("GENERIC DEBUG *************** Getting nearest target - 275");
						object1 = GetNearestCreature(3, 1, OBJECT_SELF, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
					}
					else {
						sub3("GENERIC DEBUG *************** Getting nearest target - 279");
						object1 = GetNearestCreature(3, 1, OBJECT_SELF, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
					}
				}
			}
		}
	}
	if (GetIsObjectValid(object1)) {
		sub3(("GENERIC DEBUG *************** Attack Target From Determine Attack Target = " + sub4(object1)));
		return object1;
	}
	sub3("GENERIC DEBUG *************** No Attack Targets Found");
	return OBJECT_INVALID;
}

int sub86() {
	object oNPC;
	int int1 = 0;
	int1 = 0;
	while ((int1 < 3)) {
		oNPC = GetPartyMemberByIndex(int1);
		if (GetIsObjectValid(oNPC)) {
			if ((GetCurrentHitPoints(oNPC) < 1)) {
				return 1;
			}
		}
		(++int1);
	}
	return 0;
}

int sub85() {
	if (((GetHasSpell(173, OBJECT_SELF) || GetHasSpell(174, OBJECT_SELF)) || GetHasSpell(175, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub84(int intParam1) {
	if (GetIsConversationActive()) {
		return 1;
	}
	object object1 = sub34();
	talent talent1;
	object object3;
	if ((GetRacialType(OBJECT_SELF) == 5)) {
		return sub33(OBJECT_INVALID);
	}
	object oNPC = GetPartyMemberByIndex(0);
	object oTarget = GetAttackTarget(oNPC);
	if ((!GetSoloMode())) {
		if (((GetObjectType(oTarget) == 8) || (GetObjectType(oTarget) == 64))) {
			return 0;
		}
	}
	if ((sub85() != (-1))) {
		int int8 = sub86();
		if (int8) {
			AurPostString("Someone is knocked out.", 20, 25, 5.0);
			if (sub15(intGLOB_128, GetFirstPC())) {
				return 1;
			}
		}
	}
	if (GetIsObjectValid(object1)) {
		if (sub15(intGLOB_125, object1)) {
			return 1;
		}
	}
	object object9 = sub14();
	if (GetIsObjectValid(object9)) {
		if (sub15(intGLOB_126, object9)) {
			return 1;
		}
	}
	if (sub15(intGLOB_127, OBJECT_SELF)) {
		return 1;
	}
	object3 = sub29();
	sub3(("GENERIC DEBUG *************** Jedi Support AI: AOE Target = " + sub9(GetIsObjectValid(object3))));
	if (GetIsObjectValid(object3)) {
		if ((GetRacialType(object3) == 5)) {
			talent1 = sub24(intGLOB_2, 1);
		}
		else {
			talent1 = sub24(intGLOB_2, 0);
		}
	}
	else {
		sub3("GENERIC DEBUG *************** Jedi Support AI: Inside the Party AI Section");
		object3 = sub87(OBJECT_INVALID);
		sub3(("GENERIC DEBUG *************** Boss AI: Initial oFind Search = " + sub4(object3)));
		if (GetIsObjectValid(object3)) {
			sub3(("GENERIC DEBUG *************** Jedi Support AI: Valid oTarget Set As = " + sub4(object3)));
			if ((GetRacialType(object3) == 5)) {
				talent1 = sub24(intGLOB_3, 1);
			}
			else {
				talent1 = sub24(intGLOB_3, 0);
			}
		}
	}
	talent1 = sub31(object3, talent1);
	talent1 = sub32(object3, talent1);
	if ((GetIsObjectValid(object3) && GetIsTalentValid(talent1))) {
		sub3("GENERIC DEBUG *************** Clear 1450");
		ClearAllActions();
		ActionUseTalentOnObject(talent1, object3);
		return 1;
	}
	sub3("GENERIC DEBUG *************** Jedi Support AI: Fall Through");
	return sub33(OBJECT_INVALID);
}

int sub83(float floatParam1) {
	if ((!IsObjectPartyMember(OBJECT_SELF))) {
		return 0;
	}
	object oLeader = GetPartyLeader();
	if ((OBJECT_SELF == oLeader)) {
		return 0;
	}
	if ((GetCurrentHitPoints(OBJECT_SELF) < 1)) {
		return 0;
	}
	float fDistance = GetDistanceToObject2D(oLeader);
	if ((fDistance <= floatParam1)) {
		return 0;
	}
	int nAction = GetCurrentAction(OBJECT_SELF);
	if ((nAction == 0)) {
		return 1;
	}
	ClearAllActions();
	ActionMoveToObject(oLeader, 1, (floatParam1 / 2.0));
	return 1;
}

int sub82(int intParam1) {
	if ((IsObjectPartyMember(OBJECT_SELF) || (d100(1) > 50))) {
		int int3 = 0;
		talent talent1;
		object object1 = sub21();
		if ((GetRacialType(object1) == 5)) {
			int3 = 1;
		}
		talent1 = sub25(int3);
		if (((GetIsObjectValid(object1) && GetIsTalentValid(talent1)) && GetCreatureHasTalent(talent1, OBJECT_SELF))) {
			sub3("GENERIC DEBUG *************** Clear 1400");
			ClearAllActions();
			ActionUseTalentOnObject(talent1, object1);
			return 1;
		}
		sub3("GENERIC DEBUG *************** Grenade AI Failure");
		return sub33(intParam1);
	}
	sub3("GENERIC DEBUG *************** Grenade AI Fall Through");
	return sub33(intParam1);
}

int sub81(int intParam1) {
	if ((GetCurrentAction(OBJECT_SELF) == 0)) {
		return 1;
	}
	int nLocal = GetLocalNumber(OBJECT_SELF, 0);
	int int4 = ((nLocal * 100) / 5);
	int nRandom = Random(100);
	if ((nRandom < int4)) {
		vector vRandom = GetRandomDestination(OBJECT_SELF, 6);
		float fFacing = GetFacing(OBJECT_SELF);
		SetLocalNumber(OBJECT_SELF, 0, 0);
		location location1 = Location(vRandom, fFacing);
		ActionMoveToLocation(location1, 1);
		return 1;
	}
	else {
		nLocal = (nLocal + 1);
		SetLocalNumber(OBJECT_SELF, 0, nLocal);
		return 0;
	}
}

void sub80(object objectParam1) {
	SetFacingPoint(GetPosition(objectParam1));
	{
		int nMaxHP = GetMaxHitPoints(objectParam1);
		int nCurHP = GetCurrentHitPoints(objectParam1);
		int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_13);
		if ((!nLocal)) {
		nLocal = 25;
		}
		int int7 = ((nMaxHP * nLocal) / 100);
		if (((nMaxHP - nCurHP) < int7)) {
		int7 = (nMaxHP - nCurHP);
		}
		effect efHeal = EffectHeal(int7);
		ApplyEffectToObject(0, efHeal, objectParam1, 0.0);
		effect efBeam = EffectBeam(2052, OBJECT_SELF, 0, 0);
		ApplyEffectToObject(1, efBeam, objectParam1, 1.0);
		effect efVisual;
		if ((GetRacialType(objectParam1) == 5)) {
		efVisual = EffectVisualEffect(1048, 0);
		}
		else {
		efVisual = EffectVisualEffect(1019, 0);
		}
		ApplyEffectToObject(1, efVisual, objectParam1, 3.0);
	}
}

int sub79(int intParam1) {
	object oTarget = GetHealTarget(OBJECT_SELF);
	if ((GetIsObjectValid(oTarget) && (!GetIsDead(oTarget)))) {
		float fDistance = GetDistanceToObject(oTarget);
		if ((fDistance < 3.5)) {
			sub80(oTarget);
			SetHealTarget(OBJECT_SELF, OBJECT_INVALID);
			if (GetIsInCombat(OBJECT_SELF, 0)) {
				DelayCommand(3.0, sub2(intParam1));
			}
		}
		else {
			int nAction = GetCurrentAction(OBJECT_SELF);
			if ((nAction != 0)) {
				ActionMoveToObject(oTarget, 1, 3.0);
				if (GetIsInCombat(OBJECT_SELF, 0)) {
					DelayCommand(3.0, sub2(intParam1));
				}
			}
		}
		return 0;
	}
	else {
		SetHealTarget(OBJECT_SELF, OBJECT_INVALID);
	}
	object oShapeObject = GetFirstObjectInShape(4, 20.0, GetLocation(OBJECT_SELF), 0, 1, [0.0,0.0,0.0]);
	while (GetIsObjectValid(oShapeObject)) {
		{
			int int8 = 1;
			if ((oShapeObject == OBJECT_SELF)) {
			int8 = 0;
			}
			int8;
			if ((int8 && GetIsDead(oShapeObject))) {
			int8 = 0;
			}
			int8;
			if ((int8 && (!GetIsFriend(oShapeObject, OBJECT_SELF)))) {
			int8 = 0;
			}
			if (((GetStandardFaction(OBJECT_SELF) != 2) && (GetStandardFaction(OBJECT_SELF) != 4))) {
			if ((GetRacialType(oShapeObject) != 5)) {
				int8 = 0;
			}
			}
			if ((GetStandardFaction(OBJECT_SELF) == 5)) {
			int8 = 0;
			}
			if (int8) {
			int nCurHP = GetCurrentHitPoints(oShapeObject);
			int nMaxHP = GetMaxHitPoints(oShapeObject);
			int int19 = ((nCurHP * 100) / nMaxHP);
			int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_12);
			if ((nLocal < 1)) {
				nLocal = 50;
			}
			if ((int19 < nLocal)) {
				ClearAllActions();
				float float3 = GetDistanceToObject2D(oShapeObject);
				if ((float3 > 3.5)) {
					SetHealTarget(OBJECT_SELF, oShapeObject);
					ActionMoveToObject(oShapeObject, 1, 3.0);
					if (GetIsInCombat(OBJECT_SELF, 0)) {
						DelayCommand(3.0, sub2(intParam1));
					}
					return 0;
				}
				else {
					sub80(oShapeObject);
					SetHealTarget(OBJECT_SELF, OBJECT_INVALID);
					if (GetIsInCombat(OBJECT_SELF, 0)) {
						DelayCommand(3.0, sub2(intParam1));
					}
					return 0;
				}
			}
			}
			oShapeObject = GetNextObjectInShape(4, 20.0, GetLocation(OBJECT_SELF), 0, 1, [0.0,0.0,0.0]);
		}
	}
	return 0;
}

talent sub78(object objectParam1, talent talentParam2) {
	int int1;
	sub3("GENERIC DEBUG *************** Starting Droid Talent Double Check");
	if ((GetTypeFromTalent(talentParam2) == 0)) {
		sub3("GENERIC DEBUG *************** Droid Talent is a Spell");
		if (((GetIdFromTalent(talentParam2) == 116) || (GetIdFromTalent(talentParam2) == 117))) {
			if ((GetRacialType(objectParam1) == 6)) {
				return talentParam2;
			}
			else {
				int1 = 1;
			}
		}
		if (((GetIdFromTalent(talentParam2) == 118) || (GetIdFromTalent(talentParam2) == 119))) {
			if (((((((((((((((GetHasSpellEffect(99, objectParam1) || GetHasSpellEffect(100, objectParam1)) || GetHasSpellEffect(101, objectParam1)) || GetHasSpellEffect(102, objectParam1)) || GetHasSpellEffect(103, objectParam1)) || GetHasSpellEffect(104, objectParam1)) || GetHasSpellEffect(105, objectParam1)) || GetHasSpellEffect(106, objectParam1)) || GetHasSpellEffect(107, objectParam1)) || GetHasSpellEffect(110, objectParam1)) || GetHasSpellEffect(111, objectParam1)) || GetHasSpellEffect(112, objectParam1)) || GetHasSpellEffect(113, objectParam1)) || GetHasSpellEffect(114, objectParam1)) || GetHasSpellEffect(115, objectParam1))) {
				return talentParam2;
			}
			else {
				int1 = 1;
			}
		}
	}
	if ((int1 == 1)) {
		talent talBest = GetCreatureTalentBest(4369, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talentParam2) && GetCreatureHasTalent(talentParam2, OBJECT_SELF))) {
			return talBest;
		}
		else {
			talent talent3;
			return talent3;
		}
	}
	return talentParam2;
}

int sub77(int intParam1) {
	if (((((((((((((((intParam1 == 20) || (intParam1 == 12)) || (intParam1 == 77)) || (intParam1 == 19)) || (intParam1 == 16)) || (intParam1 == 21)) || (intParam1 == 13)) || (intParam1 == 24)) || (intParam1 == 14)) || (intParam1 == 15)) || (intParam1 == 18)) || (intParam1 == 23)) || (intParam1 == 17)) || (intParam1 == 22))) {
		return 2;
	}
	else {
		if ((((((((((((((((intParam1 == 9) || (intParam1 == 6)) || (intParam1 == 80)) || (intParam1 == 78)) || (intParam1 == 8)) || (intParam1 == 2)) || (intParam1 == 0)) || (intParam1 == 10)) || (intParam1 == 4)) || (intParam1 == 1)) || (intParam1 == 5)) || (intParam1 == 7)) || (intParam1 == 3)) || (intParam1 == 79)) || (intParam1 == 93))) {
			return 1;
		}
		else {
			return 0;
		}
	}
}

int sub76(int intParam1) {
	int int1;
	int nRandom = d4(1);
	if ((sub19(OBJECT_SELF) != 0)) {
		while ((int1 == 0)) {
			if ((sub19(OBJECT_SELF) == 1)) {
				if ((nRandom == 1)) {
					nRandom = intGLOB_21;
				}
				else {
					if ((nRandom == 2)) {
						nRandom = intGLOB_23;
					}
					else {
						if ((nRandom == 3)) {
							nRandom = intGLOB_22;
						}
						else {
							if ((nRandom == 4)) {
								nRandom = intGLOB_20;
							}
						}
					}
				}
			}
			else {
				if ((sub19(OBJECT_SELF) == 2)) {
					if ((nRandom == 1)) {
						nRandom = intGLOB_17;
					}
					else {
						if ((nRandom == 2)) {
							nRandom = intGLOB_19;
						}
						else {
							if ((nRandom == 3)) {
								nRandom = intGLOB_18;
							}
							else {
								if ((nRandom == 4)) {
									nRandom = intGLOB_16;
								}
							}
						}
					}
				}
			}
			int1 = sub56(nRandom);
			if ((int1 == 0)) {
				nRandom = d4(1);
			}
		}
	}
	else {
		if ((nRandom == 1)) {
			nRandom = intGLOB_21;
		}
		else {
			if ((nRandom == 2)) {
				nRandom = intGLOB_23;
			}
			else {
				if ((nRandom == 3)) {
					nRandom = intGLOB_22;
				}
				else {
					if ((nRandom == 4)) {
						nRandom = intGLOB_20;
					}
				}
			}
		}
	}
	return nRandom;
}

int sub75(int intParam1) {
	int int1 = 0;
	int nRandom = d6(1);
	while ((int1 == 0)) {
		if ((nRandom == 1)) {
			nRandom = intGLOB_17;
		}
		else {
			if ((nRandom == 2)) {
				nRandom = intGLOB_19;
			}
			else {
				if ((nRandom == 3)) {
					nRandom = intGLOB_18;
				}
				else {
					if ((nRandom == 4)) {
						nRandom = intGLOB_16;
					}
					else {
						if (((nRandom == 5) || (nRandom == 6))) {
							if (((IsObjectPartyMember(OBJECT_SELF) && (GetNPCAIStyle(OBJECT_SELF) == 5)) || (!IsObjectPartyMember(OBJECT_SELF)))) {
								if ((nRandom == 5)) {
									nRandom = intGLOB_45;
								}
								else {
									if ((nRandom == 6)) {
										nRandom = intGLOB_46;
									}
								}
							}
							else {
								nRandom = intGLOB_47;
							}
						}
					}
				}
			}
		}
		int1 = sub56(nRandom);
		if ((int1 == 0)) {
			nRandom = d6(1);
		}
	}
	return nRandom;
}

string sub74(int intParam1) {
	if ((intParam1 == intGLOB_16)) {
		return "SW_COMBO_RANGED_FEROCIOUS";
	}
	else {
		if ((intParam1 == intGLOB_17)) {
			return "SW_COMBO_RANGED_AGGRESSIVE";
		}
		else {
			if ((intParam1 == intGLOB_18)) {
				return "SW_COMBO_RANGED_DISCIPLINED";
			}
			else {
				if ((intParam1 == intGLOB_19)) {
					return "SW_COMBO_RANGED_CAUTIOUS";
				}
				else {
					if ((intParam1 == intGLOB_20)) {
						return "SW_COMBO_MELEE_FEROCIOUS";
					}
					else {
						if ((intParam1 == intGLOB_21)) {
							return "SW_COMBO_MELEE_AGGRESSIVE";
						}
						else {
							if ((intParam1 == intGLOB_22)) {
								return "SW_COMBO_MELEE_DISCIPLINED";
							}
							else {
								if ((intParam1 == intGLOB_23)) {
									return "SW_COMBO_MELEE_CAUTIOUS";
								}
								else {
									if ((intParam1 == intGLOB_24)) {
										return "SW_COMBO_BUFF_PARTY";
									}
									else {
										if ((intParam1 == intGLOB_25)) {
											return "SW_COMBO_BUFF_DEBILITATE";
										}
										else {
											if ((intParam1 == intGLOB_26)) {
												return "SW_COMBO_BUFF_DAMAGE";
											}
											else {
												if ((intParam1 == intGLOB_27)) {
													return "SW_COMBO_BUFF_DEBILITATE_DESTROY";
												}
												else {
													if ((intParam1 == intGLOB_28)) {
														return "SW_COMBO_SUPRESS_DEBILITATE_DESTROY";
													}
													else {
														if ((intParam1 == intGLOB_29)) {
															return "SW_COMBO_SITH_ATTACK";
														}
														else {
															if ((intParam1 == intGLOB_30)) {
																return "SW_COMBO_BUFF_ATTACK";
															}
															else {
																if ((intParam1 == intGLOB_31)) {
																	return "SW_COMBO_SITH_CONFOUND";
																}
																else {
																	if ((intParam1 == intGLOB_32)) {
																		return "SW_COMBO_JEDI_SMITE";
																	}
																	else {
																		if ((intParam1 == intGLOB_33)) {
																			return "SW_COMBO_SITH_TAUNT";
																		}
																		else {
																			if ((intParam1 == intGLOB_34)) {
																				return "SW_COMBO_SITH_BLADE";
																			}
																			else {
																				if ((intParam1 == intGLOB_35)) {
																					return "SW_COMBO_SITH_CRUSH";
																				}
																				else {
																					if ((intParam1 == intGLOB_36)) {
																						return "SW_COMBO_JEDI_CRUSH";
																					}
																					else {
																						if ((intParam1 == intGLOB_37)) {
																							return "SW_COMBO_SITH_BRUTALIZE";
																						}
																						else {
																							if ((intParam1 == intGLOB_38)) {
																								return "SW_COMBO_SITH_DRAIN";
																							}
																							else {
																								if ((intParam1 == intGLOB_39)) {
																									return "SW_COMBO_SITH_ESCAPE";
																								}
																								else {
																									if ((intParam1 == intGLOB_40)) {
																										return "SW_COMBO_JEDI_BLITZ";
																									}
																									else {
																										if ((intParam1 == intGLOB_41)) {
																											return "SW_COMBO_SITH_SPIKE";
																										}
																										else {
																											if ((intParam1 == intGLOB_42)) {
																												return "SW_COMBO_SITH_SCYTHE";
																											}
																											else {
																												if ((intParam1 == intGLOB_45)) {
																													return "SW_COMBO_DROID_UTILITIES";
																												}
																											}
																										}
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	return "NO COMBO SELECTED";
}

int sub73() {
	talent talRandom = GetCreatureTalentRandom(32768, OBJECT_SELF, 0);
	if (GetIsTalentValid(talRandom)) {
		return 1;
	}
	return 0;
}

int sub72() {
	if ((((((GetHasSpell(138, OBJECT_SELF) || GetHasSpell(139, OBJECT_SELF)) || GetHasSpell(140, OBJECT_SELF)) || GetHasSpell(141, OBJECT_SELF)) || GetHasSpell(142, OBJECT_SELF)) || GetHasSpell(143, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub71() {
	if (((GetHasSpell(159, OBJECT_SELF) || GetHasSpell(160, OBJECT_SELF)) || GetHasSpell(161, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub70() {
	if (((GetHasSpell(164, OBJECT_SELF) || GetHasSpell(165, OBJECT_SELF)) || GetHasSpell(166, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub69() {
	if ((GetHasSpell(48, OBJECT_SELF) || GetHasSpell(19, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub68() {
	if (((GetHasSpell(153, OBJECT_SELF) || GetHasSpell(154, OBJECT_SELF)) || GetHasSpell(155, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub67() {
	if ((GetHasSpell(15, OBJECT_SELF) || GetHasSpell(11, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub66() {
	if ((GetHasSpell(49, OBJECT_SELF) || GetHasSpell(4, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub65() {
	if (((GetHasSpell(45, OBJECT_SELF) || GetHasSpell(7, OBJECT_SELF)) || GetHasSpell(38, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub64() {
	if (((GetHasSpell(46, OBJECT_SELF) || GetHasSpell(29, OBJECT_SELF)) || GetHasSpell(44, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub63() {
	if (((GetHasSpell(43, OBJECT_SELF) || GetHasSpell(35, OBJECT_SELF)) || GetHasSpell(25, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub62() {
	if (((GetHasSpell(8, OBJECT_SELF) || GetHasSpell(37, OBJECT_SELF)) || GetHasSpell(34, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub61() {
	if (((GetHasSpell(17, OBJECT_SELF) || GetHasSpell(24, OBJECT_SELF)) || GetHasSpell(18, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub60() {
	if ((GetHasSpell(21, OBJECT_SELF) || GetHasSpell(3, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub59() {
	if (((GetHasSpell(9, OBJECT_SELF) || GetHasSpell(50, OBJECT_SELF)) || GetHasSpell(32, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub58() {
	if (((GetHasSpell(23, OBJECT_SELF) || GetHasSpell(27, OBJECT_SELF)) || GetHasSpell(26, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub57() {
	if ((((((((((((((((((((((GetHasSpell(9, OBJECT_SELF) || GetHasSpell(11, OBJECT_SELF)) || GetHasSpell(15, OBJECT_SELF)) || GetHasSpell(13, OBJECT_SELF)) || GetHasSpell(12, OBJECT_SELF)) || GetHasSpell(23, OBJECT_SELF)) || GetHasSpell(25, OBJECT_SELF)) || GetHasSpell(26, OBJECT_SELF)) || GetHasSpell(27, OBJECT_SELF)) || GetHasSpell(32, OBJECT_SELF)) || GetHasSpell(49, OBJECT_SELF)) || GetHasSpell(4, OBJECT_SELF)) || GetHasSpell(35, OBJECT_SELF)) || GetHasSpell(43, OBJECT_SELF)) || GetHasSpell(50, OBJECT_SELF)) || GetHasSpell(153, OBJECT_SELF)) || GetHasSpell(154, OBJECT_SELF)) || GetHasSpell(155, OBJECT_SELF)) || GetHasSpell(159, OBJECT_SELF)) || GetHasSpell(160, OBJECT_SELF)) || GetHasSpell(161, OBJECT_SELF)) || GetHasSpell(177, OBJECT_SELF))) {
		return 1;
	}
	return 0;
}

int sub56(int intParam1) {
	if ((intParam1 == intGLOB_47)) {
		return 0;
	}
	talent talRandom;
	talent talent2;
	if ((((intParam1 == intGLOB_20) || (intParam1 == intGLOB_21)) || (intParam1 == intGLOB_22))) {
		talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
		if ((GetIsTalentValid(talRandom) && GetCreatureHasTalent(talRandom, OBJECT_SELF))) {
			return 1;
		}
	}
	else {
		if ((intParam1 == intGLOB_19)) {
			return 1;
		}
		else {
			if ((((intParam1 == intGLOB_16) || (intParam1 == intGLOB_17)) || (intParam1 == intGLOB_18))) {
				if (((((((((GetHasFeat(31, OBJECT_SELF) || GetHasFeat(20, OBJECT_SELF)) || GetHasFeat(77, OBJECT_SELF)) || GetHasFeat(29, OBJECT_SELF)) || GetHasFeat(18, OBJECT_SELF)) || GetHasFeat(82, OBJECT_SELF)) || GetHasFeat(30, OBJECT_SELF)) || GetHasFeat(26, OBJECT_SELF)) || GetHasFeat(92, OBJECT_SELF))) {
					return 1;
				}
			}
			else {
				if ((intParam1 == intGLOB_23)) {
					return 1;
				}
				else {
					if ((intParam1 == intGLOB_24)) {
						talRandom = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
						if ((GetIsTalentValid(talRandom) && GetCreatureHasTalent(talRandom, OBJECT_SELF))) {
							return 1;
						}
					}
					else {
						if ((intParam1 == intGLOB_25)) {
							talRandom = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
							talent2 = GetCreatureTalentRandom(62207, OBJECT_SELF, 0);
							if ((((GetIsTalentValid(talRandom) && GetIsTalentValid(talent2)) && GetCreatureHasTalent(talRandom, OBJECT_SELF)) && GetCreatureHasTalent(talent2, OBJECT_SELF))) {
								return 1;
							}
						}
						else {
							if ((intParam1 == intGLOB_26)) {
								talRandom = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
								if ((GetIsTalentValid(talRandom) && sub57())) {
									return 1;
								}
							}
							else {
								if ((intParam1 == intGLOB_27)) {
									talRandom = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
									talent2 = GetCreatureTalentRandom(62207, OBJECT_SELF, 0);
									if (((GetIsTalentValid(talRandom) && GetIsTalentValid(talent2)) && sub57())) {
										return 1;
									}
								}
								else {
									if ((intParam1 == intGLOB_28)) {
										talRandom = GetCreatureTalentRandom(65327, OBJECT_SELF, 0);
										talent2 = GetCreatureTalentRandom(62207, OBJECT_SELF, 0);
										if (((GetIsTalentValid(talRandom) && GetIsTalentValid(talent2)) && sub57())) {
											return 1;
										}
									}
									else {
										if ((intParam1 == intGLOB_29)) {
											if (((sub58() && sub59()) && sub60())) {
												return 1;
											}
										}
										else {
											if ((intParam1 == intGLOB_30)) {
												talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
												if (((sub61() && sub62()) && GetIsTalentValid(talRandom))) {
													return 1;
												}
											}
											else {
												if ((intParam1 == intGLOB_31)) {
													talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
													if ((sub63() && GetIsTalentValid(talRandom))) {
														return 1;
													}
												}
												else {
													if ((intParam1 == intGLOB_32)) {
														talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
														if ((sub64() && GetIsTalentValid(talRandom))) {
															return 1;
														}
													}
													else {
														if ((intParam1 == intGLOB_33)) {
															talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
															if (((sub59() && sub65()) && GetIsTalentValid(talRandom))) {
																return 1;
															}
														}
														else {
															if ((intParam1 == intGLOB_34)) {
																if (((sub65() && sub58()) && sub66())) {
																	return 1;
																}
															}
															else {
																if ((intParam1 == intGLOB_35)) {
																	if (((sub63() && sub58()) && sub60())) {
																		return 1;
																	}
																}
																else {
																	if ((intParam1 == intGLOB_36)) {
																		if (((sub64() && sub58()) && sub60())) {
																			return 1;
																		}
																	}
																	else {
																		if ((intParam1 == intGLOB_36)) {
																			if (((sub59() && sub67()) && sub58())) {
																				return 1;
																			}
																		}
																		else {
																			if ((intParam1 == intGLOB_38)) {
																				talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
																				if ((sub67() && GetIsTalentValid(talRandom))) {
																					return 1;
																				}
																			}
																			else {
																				if ((intParam1 == intGLOB_39)) {
																					if (((sub67() && sub58()) && sub66())) {
																						return 1;
																					}
																				}
																				else {
																					if ((intParam1 == intGLOB_40)) {
																						talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
																						if (((sub58() && GetIsTalentValid(talRandom)) && GetHasSpell(177, OBJECT_SELF))) {
																							return 1;
																						}
																					}
																					else {
																						if ((intParam1 == intGLOB_41)) {
																							talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
																							if (((sub58() && sub65()) && GetIsTalentValid(talRandom))) {
																								return 1;
																							}
																						}
																						else {
																							if ((intParam1 == intGLOB_42)) {
																								talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
																								if (((sub68() && sub69()) && GetIsTalentValid(talRandom))) {
																									return 1;
																								}
																							}
																							else {
																								if ((intParam1 == intGLOB_43)) {
																									talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
																									if (((sub70() && sub71()) && GetIsTalentValid(talRandom))) {
																										return 1;
																									}
																								}
																								else {
																									if ((intParam1 == intGLOB_44)) {
																										talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
																										if ((sub72() && GetIsTalentValid(talRandom))) {
																											return 1;
																										}
																									}
																									else {
																										if (((intParam1 == intGLOB_45) || (intParam1 == intGLOB_46))) {
																											object oLArmItem = GetItemInSlot(7, OBJECT_SELF);
																											object oRArmItem = GetItemInSlot(8, OBJECT_SELF);
																											sub3(((("GENERIC DEBUG *************** Droid Items = " + sub4(oLArmItem)) + " / ") + sub4(oRArmItem)));
																											if (sub73()) {
																												sub3("GENERIC DEBUG *************** Droid Utility Check is TRUE");
																												return 1;
																											}
																											sub3("GENERIC DEBUG *************** Droid Utility Check is FALSE");
																										}
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	return 0;
}

int sub55(int intParam1) {
	int int1;
	int nRandom;
	while ((int1 == 0)) {
		if ((intParam1 == 0)) {
			nRandom = (Random(25) + 1);
			if (((nRandom == 1) || (nRandom == 2))) {
				return intGLOB_20;
			}
			else {
				if (((nRandom == 3) || (nRandom == 4))) {
					return intGLOB_21;
				}
				else {
					if (((nRandom == 5) || (nRandom == 6))) {
						return intGLOB_22;
					}
					else {
						if ((((nRandom == 7) || (nRandom == 8)) || (nRandom == 9))) {
							return intGLOB_23;
						}
						else {
							if (((nRandom >= 10) || (nRandom <= 26))) {
								nRandom = (nRandom + 3);
							}
						}
					}
				}
			}
		}
		else {
			nRandom = Random(15);
			nRandom = (nRandom + 14);
		}
		int1 = sub56(nRandom);
	}
	return nRandom;
}

int sub54() {
	if ((sub19(OBJECT_SELF) != 2)) {
		talent talBest = GetCreatureTalentBest(4356, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talBest) && GetCreatureHasTalent(talBest, OBJECT_SELF))) {
			int nTalent = GetIdFromTalent(talBest);
			return nTalent;
		}
	}
	else {
		talent talent3 = GetCreatureTalentBest(4369, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talent3) && GetCreatureHasTalent(talent3, OBJECT_SELF))) {
			int int8 = GetIdFromTalent(talent3);
			return int8;
		}
	}
	return (-1);
}

int sub53() {
	if (GetHasSpell(140, OBJECT_SELF)) {
		return 140;
	}
	else {
		if (GetHasSpell(139, OBJECT_SELF)) {
			return 139;
		}
		else {
			if (GetHasSpell(138, OBJECT_SELF)) {
				return 138;
			}
		}
	}
	if (GetHasSpell(143, OBJECT_SELF)) {
		return 143;
	}
	else {
		if (GetHasSpell(142, OBJECT_SELF)) {
			return 142;
		}
		else {
			if (GetHasSpell(141, OBJECT_SELF)) {
				return 141;
			}
		}
	}
	return (-1);
}

int sub52() {
	if (GetHasSpell(166, OBJECT_SELF)) {
		return 166;
	}
	else {
		if (GetHasSpell(165, OBJECT_SELF)) {
			return 165;
		}
		else {
			if (GetHasSpell(164, OBJECT_SELF)) {
				return 164;
			}
		}
	}
	return (-1);
}

int sub51() {
	if (GetHasSpell(19, OBJECT_SELF)) {
		return 19;
	}
	else {
		if (GetHasSpell(48, OBJECT_SELF)) {
			return 48;
		}
	}
	return (-1);
}

int sub50() {
	if (GetHasSpell(155, OBJECT_SELF)) {
		return 155;
	}
	else {
		if (GetHasSpell(154, OBJECT_SELF)) {
			return 154;
		}
		else {
			if (GetHasSpell(153, OBJECT_SELF)) {
				return 153;
			}
		}
	}
	return (-1);
}

int sub49() {
	if (GetHasSpell(11, OBJECT_SELF)) {
		return 11;
	}
	else {
		if (GetHasSpell(15, OBJECT_SELF)) {
			return 15;
		}
	}
	return (-1);
}

int sub48() {
	if (GetHasSpell(4, OBJECT_SELF)) {
		return 4;
	}
	else {
		if (GetHasSpell(49, OBJECT_SELF)) {
			return 49;
		}
	}
	return (-1);
}

int sub47() {
	if (GetHasSpell(38, OBJECT_SELF)) {
		return 38;
	}
	else {
		if (GetHasSpell(7, OBJECT_SELF)) {
			return 7;
		}
		else {
			if (GetHasSpell(45, OBJECT_SELF)) {
				return 45;
			}
		}
	}
	return (-1);
}

int sub46() {
	if (GetHasSpell(32, OBJECT_SELF)) {
		return 32;
	}
	else {
		if (GetHasSpell(9, OBJECT_SELF)) {
			return 9;
		}
		else {
			if (GetHasSpell(50, OBJECT_SELF)) {
				return 50;
			}
		}
	}
	return (-1);
}

int sub45() {
	if (GetHasSpell(44, OBJECT_SELF)) {
		return 44;
	}
	else {
		if (GetHasSpell(29, OBJECT_SELF)) {
			return 29;
		}
		else {
			if (GetHasSpell(46, OBJECT_SELF)) {
				return 46;
			}
		}
	}
	return (-1);
}

int sub44() {
	if (GetHasSpell(25, OBJECT_SELF)) {
		return 25;
	}
	else {
		if (GetHasSpell(35, OBJECT_SELF)) {
			return 35;
		}
		else {
			if (GetHasSpell(43, OBJECT_SELF)) {
				return 43;
			}
		}
	}
	return (-1);
}

int sub43() {
	if ((sub19(OBJECT_SELF) == 2)) {
		talent talBest = GetCreatureTalentBest(4369, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talBest) && GetCreatureHasTalent(talBest, OBJECT_SELF))) {
			int nTalent = GetIdFromTalent(talBest);
			return nTalent;
		}
	}
	else {
		talent talent3 = GetCreatureTalentBest(4356, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talent3) && GetCreatureHasTalent(talent3, OBJECT_SELF))) {
			int int8 = GetIdFromTalent(talent3);
			return int8;
		}
	}
	return (-1);
}

int sub42() {
	if (GetHasSpell(37, OBJECT_SELF)) {
		return 37;
	}
	else {
		if (GetHasSpell(34, OBJECT_SELF)) {
			return 34;
		}
		else {
			if (GetHasSpell(8, OBJECT_SELF)) {
				return 8;
			}
		}
	}
	return (-1);
}

int sub41() {
	if (GetHasSpell(17, OBJECT_SELF)) {
		return 17;
	}
	else {
		if (GetHasSpell(24, OBJECT_SELF)) {
			return 24;
		}
		else {
			if (GetHasSpell(18, OBJECT_SELF)) {
				return 18;
			}
		}
	}
	return (-1);
}

int sub40() {
	if (GetHasSpell(3, OBJECT_SELF)) {
		return 3;
	}
	else {
		if (GetHasSpell(21, OBJECT_SELF)) {
			return 21;
		}
	}
	return (-1);
}

int sub39() {
	if (GetHasSpell(26, OBJECT_SELF)) {
		return 26;
	}
	else {
		if (GetHasSpell(27, OBJECT_SELF)) {
			return 27;
		}
		else {
			if (GetHasSpell(23, OBJECT_SELF)) {
				return 23;
			}
		}
	}
	return (-1);
}

int sub38() {
	if (GetHasSpell(161, OBJECT_SELF)) {
		return 161;
	}
	else {
		if (GetHasSpell(160, OBJECT_SELF)) {
			return 160;
		}
		else {
			if (GetHasSpell(159, OBJECT_SELF)) {
				return 159;
			}
		}
	}
	return (-1);
}

talent sub37(int intParam1) {
	SetLocalBoolean(OBJECT_SELF, intGLOB_48, 0);
	int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_8);
	talent talFeat;
	talent talent2;
	int nTalent = (-1);
	int int4 = 0;
	int int5 = 0;
	if ((intParam1 == intGLOB_29)) {
		if ((nLocal == 1)) {
			sub38();
		}
		else {
			if ((nLocal == 2)) {
				nTalent = sub39();
			}
			else {
				nTalent = sub40();
			}
		}
	}
	else {
		if ((intParam1 == intGLOB_30)) {
			if ((nLocal == 1)) {
				nTalent = sub41();
				int5 = 1;
			}
			else {
				if ((nLocal == 2)) {
					nTalent = sub42();
					int5 = 1;
				}
				else {
					nTalent = sub43();
					int4 = 1;
				}
			}
		}
		else {
			if ((intParam1 == intGLOB_31)) {
				if ((nLocal == 1)) {
					nTalent = sub44();
				}
				else {
					if ((nLocal == 2)) {
						nTalent = sub43();
						int4 = 1;
					}
					else {
						nTalent = sub43();
						int4 = 1;
					}
				}
			}
			else {
				if ((intParam1 == intGLOB_32)) {
					if ((nLocal == 1)) {
						nTalent = sub45();
					}
					else {
						if ((nLocal == 2)) {
							nTalent = sub43();
							int4 = 1;
						}
						else {
							nTalent = sub43();
							int4 = 1;
						}
					}
				}
				else {
					if ((intParam1 == intGLOB_33)) {
						if ((nLocal == 1)) {
							nTalent = sub46();
						}
						else {
							if ((nLocal == 2)) {
								nTalent = sub47();
							}
							else {
								nTalent = sub43();
								int4 = 1;
							}
						}
					}
					else {
						if ((intParam1 == intGLOB_34)) {
							if ((nLocal == 1)) {
								nTalent = sub47();
							}
							else {
								if ((nLocal == 2)) {
									nTalent = sub39();
								}
								else {
									nTalent = sub48();
								}
							}
						}
						else {
							if ((intParam1 == intGLOB_35)) {
								if ((nLocal == 1)) {
									nTalent = sub44();
								}
								else {
									if ((nLocal == 2)) {
										nTalent = sub39();
									}
									else {
										nTalent = sub40();
									}
								}
							}
							else {
								if ((intParam1 == intGLOB_36)) {
									if ((nLocal == 1)) {
										nTalent = sub45();
									}
									else {
										if ((nLocal == 2)) {
											nTalent = sub39();
										}
										else {
											nTalent = sub40();
										}
									}
								}
								else {
									if ((intParam1 == intGLOB_37)) {
										if ((nLocal == 1)) {
											nTalent = sub46();
										}
										else {
											if ((nLocal == 2)) {
												nTalent = sub49();
											}
											else {
												nTalent = sub39();
											}
										}
									}
									else {
										if ((intParam1 == intGLOB_38)) {
											if ((nLocal == 1)) {
												nTalent = sub43();
												int4 = 1;
											}
											else {
												if ((nLocal == 2)) {
													nTalent = sub49();
												}
												else {
													nTalent = sub43();
													int4 = 1;
												}
											}
										}
										else {
											if ((intParam1 == intGLOB_39)) {
												if ((nLocal == 1)) {
													nTalent = sub49();
												}
												else {
													if ((nLocal == 2)) {
														nTalent = sub39();
													}
													else {
														nTalent = sub48();
													}
												}
											}
											else {
												if ((intParam1 == intGLOB_40)) {
													if ((nLocal == 1)) {
														nTalent = 177;
														int4 = 1;
													}
													else {
														if ((nLocal == 2)) {
															nTalent = sub43();
															int4 = 1;
														}
														else {
															nTalent = sub39();
														}
													}
												}
												else {
													if ((intParam1 == intGLOB_41)) {
														if ((nLocal == 1)) {
															nTalent = sub47();
														}
														else {
															if ((nLocal == 2)) {
																nTalent = sub43();
																int4 = 1;
															}
															else {
																nTalent = sub39();
															}
														}
													}
													else {
														if ((intParam1 == intGLOB_42)) {
															if ((nLocal == 1)) {
																nTalent = sub50();
															}
															else {
																if ((nLocal == 2)) {
																	nTalent = sub51();
																}
																else {
																	nTalent = sub43();
																	int4 = 1;
																}
															}
														}
														else {
															if ((intParam1 == intGLOB_43)) {
																if ((nLocal == 1)) {
																	nTalent = sub52();
																}
																else {
																	if ((nLocal == 2)) {
																		nTalent = sub38();
																	}
																	else {
																		nTalent = sub43();
																		int4 = 1;
																	}
																}
															}
															else {
																if ((intParam1 == intGLOB_44)) {
																	if ((nLocal == 1)) {
																		nTalent = sub53();
																	}
																	else {
																		if ((nLocal == 2)) {
																			nTalent = sub43();
																			int4 = 1;
																		}
																		else {
																			nTalent = sub43();
																			int4 = 1;
																		}
																	}
																}
																else {
																	if ((intParam1 == intGLOB_20)) {
																		nTalent = sub43();
																		int4 = 1;
																	}
																	else {
																		if ((intParam1 == intGLOB_21)) {
																			if (((nLocal == 1) || (nLocal == 2))) {
																				nTalent = sub43();
																				int4 = 1;
																			}
																		}
																		else {
																			if ((intParam1 == intGLOB_22)) {
																				if (((nLocal == 1) || (nLocal == 2))) {
																					nTalent = sub43();
																					int4 = 1;
																				}
																			}
																			else {
																				if (((intParam1 == intGLOB_23) || (intParam1 == intGLOB_19))) {
																					sub3("GENERIC DEBUG *************** Melee/Ranged Breather");
																				}
																				else {
																					if ((intParam1 == intGLOB_16)) {
																						nTalent = sub54();
																						int4 = 1;
																					}
																					else {
																						if ((intParam1 == intGLOB_17)) {
																							if (((nLocal == 1) || (nLocal == 2))) {
																								nTalent = sub54();
																								int4 = 1;
																							}
																						}
																						else {
																							if ((intParam1 == intGLOB_18)) {
																								if (((nLocal == 1) || (nLocal == 2))) {
																									nTalent = sub54();
																									int4 = 1;
																								}
																							}
																							else {
																								if ((intParam1 == intGLOB_24)) {
																									talFeat = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
																								}
																								else {
																									if ((intParam1 == intGLOB_25)) {
																										if ((nLocal == 1)) {
																											talFeat = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
																										}
																										else {
																											talFeat = GetCreatureTalentRandom(62207, OBJECT_SELF, 0);
																										}
																									}
																									else {
																										if ((intParam1 == intGLOB_26)) {
																											if ((nLocal == 1)) {
																												talFeat = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
																											}
																											else {
																												talFeat = GetCreatureTalentRandom(61951, OBJECT_SELF, 0);
																											}
																										}
																										else {
																											if ((intParam1 == intGLOB_27)) {
																												if ((nLocal == 1)) {
																													talFeat = GetCreatureTalentRandom(63743, OBJECT_SELF, 0);
																												}
																												if ((nLocal == 2)) {
																													talFeat = GetCreatureTalentRandom(62207, OBJECT_SELF, 0);
																												}
																												if ((nLocal == 3)) {
																													talFeat = GetCreatureTalentRandom(4353, OBJECT_SELF, 0);
																												}
																											}
																											else {
																												if ((intParam1 == intGLOB_28)) {
																													if ((nLocal == 1)) {
																														talFeat = GetCreatureTalentRandom(61951, OBJECT_SELF, 0);
																													}
																													if ((nLocal == 2)) {
																														talFeat = GetCreatureTalentRandom(62207, OBJECT_SELF, 0);
																													}
																													if ((nLocal == 3)) {
																														talFeat = GetCreatureTalentRandom(4353, OBJECT_SELF, 0);
																													}
																												}
																												else {
																													if ((intParam1 == intGLOB_45)) {
																														if ((nLocal == 1)) {
																															nTalent = sub54();
																															int4 = 1;
																														}
																														if ((nLocal == 2)) {
																															nTalent = sub54();
																															int4 = 1;
																														}
																														if ((nLocal == 3)) {
																															talFeat = GetCreatureTalentRandom(32768, OBJECT_SELF, 0);
																														}
																													}
																													else {
																														if ((intParam1 == intGLOB_46)) {
																															if ((nLocal == 1)) {
																																talFeat = GetCreatureTalentRandom(32768, OBJECT_SELF, 0);
																															}
																															if ((nLocal == 2)) {
																																nTalent = sub54();
																																int4 = 1;
																															}
																															if ((nLocal == 3)) {
																																talFeat = GetCreatureTalentRandom(32768, OBJECT_SELF, 0);
																															}
																														}
																													}
																												}
																											}
																										}
																									}
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	(nLocal++);
	SetLocalNumber(OBJECT_SELF, intGLOB_8, nLocal);
	if (((!GetIsTalentValid(talFeat)) || (!GetCreatureHasTalent(talFeat, OBJECT_SELF)))) {
		if (((nTalent != (-1)) && (int4 == 0))) {
			talFeat = TalentSpell(nTalent);
		}
		else {
			if (((nTalent != (-1)) && (int4 == 1))) {
				talFeat = TalentFeat(nTalent);
			}
		}
	}
	else {
		nTalent = GetIdFromTalent(talFeat);
	}
	if ((GetIsTalentValid(talFeat) && GetCreatureHasTalent(talFeat, OBJECT_SELF))) {
		return talFeat;
	}
	return talent2;
}

int sub36(object objectParam1) {
	if ((GetPartyMemberByIndex(0) == objectParam1)) {
		return 1;
	}
	else {
		if ((GetPartyMemberByIndex(1) == objectParam1)) {
			return 2;
		}
		else {
			if ((GetPartyMemberByIndex(2) == objectParam1)) {
				return 3;
			}
		}
	}
	return 0;
}

talent sub35(int intParam1) {
	int nRandom;
	int int2;
	talent talent1;
	int nNPCStyle = GetNPCAIStyle(OBJECT_SELF);
	sub3("GENERIC DEBUG *************** Starting GetComboMove");
	object oRWeapItem = GetItemInSlot(4, OBJECT_SELF);
	if (((((GetLevelByClass(6, OBJECT_SELF) > 0) || (GetLevelByClass(7, OBJECT_SELF) > 0)) && (!sub36(OBJECT_SELF))) && (!GetIsObjectValid(oRWeapItem)))) {
		object oLArmItem = GetItemInSlot(7, OBJECT_SELF);
		object oRArmItem = GetItemInSlot(8, OBJECT_SELF);
		int int9 = 1;
		int nLocal = GetLocalNumber(OBJECT_SELF, intGLOB_14);
		int int12 = GetLocalNumber(OBJECT_SELF, intGLOB_15);
		if (((int12 <= 0) || (int12 >= 10))) {
			int12 = 6;
		}
		if (GetIsObjectValid(oLArmItem)) {
			int2 = intGLOB_45;
		}
		else {
			if (GetIsObjectValid(oRArmItem)) {
				int2 = intGLOB_46;
			}
			else {
				int9 = 0;
			}
		}
		nLocal = (nLocal + 1);
		SetLocalNumber(OBJECT_SELF, intGLOB_14, nLocal);
		int9;
		if ((int9 && (nLocal >= int12))) {
			SetLocalNumber(OBJECT_SELF, intGLOB_8, 3);
			SetLocalNumber(OBJECT_SELF, intGLOB_7, int2);
			SetLocalNumber(OBJECT_SELF, intGLOB_14, 0);
			return sub37(int2);
		}
		else {
			SetLocalNumber(OBJECT_SELF, intGLOB_8, 0);
			SetLocalNumber(OBJECT_SELF, intGLOB_7, intGLOB_47);
		}
	}
	if (((structGLOB_1.int13 == 4) || (structGLOB_1.int13 == 0))) {
		SetLocalNumber(OBJECT_SELF, intGLOB_8, 0);
		SetLocalNumber(OBJECT_SELF, intGLOB_7, 0);
		nRandom = d6(1);
		if ((nRandom > 0)) {
			if ((((((((((GetLevelByClass(4, OBJECT_SELF) > 0) || (GetLevelByClass(3, OBJECT_SELF) > 0)) || (GetLevelByClass(5, OBJECT_SELF) > 0)) || (GetLevelByClass(11, OBJECT_SELF) > 0)) || (GetLevelByClass(12, OBJECT_SELF) > 0)) || (GetLevelByClass(13, OBJECT_SELF) > 0)) || (GetLevelByClass(14, OBJECT_SELF) > 0)) || (GetLevelByClass(15, OBJECT_SELF) > 0)) || (GetLevelByClass(16, OBJECT_SELF) > 0))) {
				int2 = sub55(intParam1);
				sub3(("GENERIC DEBUG *************** Starting Jedi Combo " + sub74(int2)));
				SetLocalNumber(OBJECT_SELF, intGLOB_8, 1);
				SetLocalNumber(OBJECT_SELF, intGLOB_7, int2);
				return sub37(int2);
			}
			else {
				if (((GetLevelByClass(6, OBJECT_SELF) > 0) || (GetLevelByClass(7, OBJECT_SELF) > 0))) {
					int2 = sub75(intParam1);
					sub3(("GENERIC DEBUG *************** Starting Droid Combo " + sub74(int2)));
					SetLocalNumber(OBJECT_SELF, intGLOB_8, 1);
					SetLocalNumber(OBJECT_SELF, intGLOB_7, int2);
					return sub37(int2);
				}
				else {
					int2 = sub76(intParam1);
					sub3(("GENERIC DEBUG *************** Starting NPC Combo " + sub74(int2)));
					SetLocalNumber(OBJECT_SELF, intGLOB_8, 1);
					SetLocalNumber(OBJECT_SELF, intGLOB_7, int2);
					return sub37(int2);
				}
			}
		}
		else {
			return talent1;
		}
	}
	else {
		sub3(("GENERIC DEBUG *************** Continuing Combo " + sub74(structGLOB_1.int15)));
		return sub37(structGLOB_1.int15);
	}
	return talent1;
}

object sub34() {
	sub3("GENERIC DEBUG *************** Starting Poison Check");
	effect efNext;
	if (IsObjectPartyMember(OBJECT_SELF)) {
		int int2 = 0;
		int2;
		while ((int2 > 2)) {
			efNext = GetFirstEffect(GetPartyMemberByIndex(int2));
			while (GetIsEffectValid(efNext)) {
				if ((GetEffectType(efNext) == 31)) {
					return GetPartyMemberByIndex(int2);
				}
				efNext = GetNextEffect(GetPartyMemberByIndex(int2));
			}
			(int2++);
		}
	}
	else {
		efNext = GetFirstEffect(OBJECT_SELF);
		while (GetIsEffectValid(efNext)) {
			if ((GetEffectType(efNext) == 31)) {
				return OBJECT_SELF;
			}
			efNext = GetNextEffect(OBJECT_SELF);
		}
	}
	sub3("GENERIC DEBUG ***************  Returning Invalid Poison Object");
	return OBJECT_INVALID;
}

int sub33(object objectParam1) {
	object oNPC;
	object oNearest = OBJECT_INVALID;
	int int1;
	talent talent1;
	int int2 = 0;
	oNPC = sub34();
	if (GetIsObjectValid(oNPC)) {
		if (sub15(intGLOB_125, oNPC)) {
			return 1;
		}
	}
	oNPC = sub14();
	if (GetIsObjectValid(oNPC)) {
		if (sub15(intGLOB_126, oNPC)) {
			return 1;
		}
	}
	talent1 = sub35(0);
	int nLocalBool = GetLocalBoolean(OBJECT_SELF, intGLOB_48);
	if ((nLocalBool == 1)) {
		if ((GetNPCAIStyle(OBJECT_SELF) == 5)) {
			oNPC = GetPartyMemberByIndex(0);
		}
		else {
			oNPC = OBJECT_SELF;
		}
	}
	else {
		oNPC = structGLOB_1.object1;
		if ((GetNPCAIStyle(OBJECT_SELF) == 10)) {
			object oLeader = GetPartyLeader();
			int int11 = 0;
			object oRWeapItem = GetItemInSlot(4, OBJECT_SELF);
			if (GetIsObjectValid(oRWeapItem)) {
				int11 = sub77(GetBaseItemType(oRWeapItem));
			}
			if ((int11 == 2)) {
				if (GetIsInCombat(oLeader, 1)) {
					oNearest = GetAttackTarget(oLeader);
				}
				else {
					oNearest = OBJECT_INVALID;
				}
			}
			else {
				oNearest = GetNearestCreature(3, 1, oLeader, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
				if ((GetIsObjectValid(oNearest) && (GetDistanceToObject(oNearest) > 5.0))) {
					oNearest = OBJECT_INVALID;
					objectParam1 = OBJECT_INVALID;
				}
			}
		}
		else {
			oNearest = GetNearestCreature(3, 1, OBJECT_SELF, 1, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
		}
		sub3("GENERIC DEBUG *************** Default AI Debug Start *************************");
		sub3(("GENERIC DEBUG *************** Intruder    = " + sub4(objectParam1)));
		sub3(("GENERIC DEBUG *************** Last Target = " + sub4(oNPC)));
		sub3(("GENERIC DEBUG *************** Closest     = " + sub4(oNearest)));
		if ((((IsObjectPartyMember(OBJECT_SELF) && GetIsObjectValid(oNPC)) && (!GetIsDead(oNPC))) && GetObjectSeen(oNPC, OBJECT_SELF))) {
			oNPC = oNPC;
		}
		else {
			if ((GetIsObjectValid(objectParam1) && GetObjectSeen(objectParam1, OBJECT_SELF))) {
				sub3("GENERIC DEBUG *************** Intruder becomes Target");
				oNPC = objectParam1;
			}
			else {
				if ((GetIsObjectValid(oNearest) && GetObjectSeen(oNearest, OBJECT_SELF))) {
					if (((((!GetIsObjectValid(oNPC)) || (!GetIsEnemy(oNPC, OBJECT_SELF))) || GetIsDead(oNPC)) || (GetCurrentHitPoints(oNPC) < GetCurrentHitPoints(oNearest)))) {
						sub3("GENERIC DEBUG *************** Closest becomes Target");
						oNPC = oNearest;
					}
				}
				else {
					if (((GetRacialType(OBJECT_SELF) == 5) && (!IsObjectPartyMember(OBJECT_SELF)))) {
						if ((!GetIsObjectValid(oNearest))) {
							oNearest = GetNearestCreature(3, 1, OBJECT_SELF, 1, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
						}
						if (GetIsObjectValid(oNearest)) {
							if (IsStealthed(oNearest)) {
								oNearest = OBJECT_INVALID;
							}
						}
						if (GetIsObjectValid(oNearest)) {
							float fDistance = GetDistanceToObject2D(oNearest);
							string string4 = FloatToString(fDistance, 18, 9);
							vector vPosition = GetPosition(oNearest);
							int nLocal = GetLocalNumber(OBJECT_SELF, 9);
							string string6 = IntToString(nLocal);
							if ((GetLocalNumber(OBJECT_SELF, 9) > 2)) {
								int nAction = GetCurrentAction(OBJECT_SELF);
								location location1 = Location(vPosition, GetFacing(OBJECT_SELF));
								ActionMoveToLocation(location1, 1);
								oNearest = OBJECT_INVALID;
								oNPC = OBJECT_INVALID;
							}
							else {
								vector vRandom = GetRandomDestination(OBJECT_SELF, 10);
								int int41 = 0;
								while ((int41 < 20)) {
									if (HasLineOfSight(vRandom, vPosition, OBJECT_INVALID, OBJECT_INVALID)) {
										break;
									}
									vRandom = GetRandomDestination(OBJECT_SELF, 20);
									(++int41);
								}
								if ((int41 < 20)) {
									string string8 = IntToString(int41);
									int int43 = GetCurrentAction(OBJECT_SELF);
									if ((int43 != 0)) {
										location location3 = Location(vRandom, GetFacing(OBJECT_SELF));
										ActionMoveToLocation(location3, 1);
										SetLocalNumber(OBJECT_SELF, 9, (GetLocalNumber(OBJECT_SELF, 9) + 1));
									}
								}
								oNearest = OBJECT_INVALID;
								oNPC = OBJECT_INVALID;
							}
						}
					}
				}
			}
		}
	}
	if (GetIsObjectValid(oNPC)) {
		SetLocalNumber(OBJECT_SELF, 9, 0);
	}
	if ((GetRacialType(OBJECT_SELF) == 5)) {
		talent1 = sub78(oNPC, talent1);
	}
	talent1 = sub31(oNPC, talent1);
	talent1 = sub32(oNPC, talent1);
	sub3("GENERIC DEBUG *************** Default AI Debug End ***************************");
	sub3(((("GENERIC DEBUG *************** Target = " + sub4(oNPC)) + " is Enemy: ") + IntToString(GetIsEnemy(oNPC, OBJECT_SELF))));
	if (GetIsObjectValid(oNPC)) {
		sub3("GENERIC DEBUG *************** Clear 1300");
		ClearAllActions();
		if (sub18()) {
			sub3("GENERIC DEBUG *************** Switching Weapons");
		}
		if ((GetIsTalentValid(talent1) && GetIsEnemy(oNPC, OBJECT_SELF))) {
			sub3("GENERIC DEBUG *************** Using Talent on Target");
			ActionUseTalentOnObject(talent1, oNPC);
			return 1;
		}
		else {
			if (GetIsEnemy(oNPC, OBJECT_SELF)) {
				sub3("GENERIC DEBUG *************** Action Attack by Default");
				ActionAttack(oNPC, 0);
				return 1;
			}
		}
	}
	sub3("GENERIC DEBUG *************** Default AI has failed to do an action");
	return 0;
}

talent sub32(object objectParam1, talent talentParam2) {
	int int1 = 0;
	if ((GetTypeFromTalent(talentParam2) == 0)) {
		if ((((((((((((((((((GetIdFromTalent(talentParam2) == 29) || (GetIdFromTalent(talentParam2) == 30)) || (GetIdFromTalent(talentParam2) == 31)) || (GetIdFromTalent(talentParam2) == 32)) || (GetIdFromTalent(talentParam2) == 38)) || (GetIdFromTalent(talentParam2) == 44)) || (GetIdFromTalent(talentParam2) == 45)) || (GetIdFromTalent(talentParam2) == 46)) || (GetIdFromTalent(talentParam2) == 50)) || (GetIdFromTalent(talentParam2) == 7)) || (GetIdFromTalent(talentParam2) == 9)) || (GetIdFromTalent(talentParam2) == 11)) || (GetIdFromTalent(talentParam2) == 15)) || (GetIdFromTalent(talentParam2) == 16)) || (GetIdFromTalent(talentParam2) == 159)) || (GetIdFromTalent(talentParam2) == 160)) || (GetIdFromTalent(talentParam2) == 161))) {
			if ((GetRacialType(objectParam1) == 5)) {
				int1 = 1;
			}
		}
	}
	if ((int1 == 1)) {
		talent talBest = GetCreatureTalentBest(4356, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talentParam2) && GetCreatureHasTalent(talentParam2, OBJECT_SELF))) {
			return talBest;
		}
		else {
			talent talent3;
			return talent3;
		}
	}
	return talentParam2;
}

talent sub31(object objectParam1, talent talentParam2) {
	int int1 = 0;
	if ((GetTypeFromTalent(talentParam2) == 0)) {
		if (((GetIdFromTalent(talentParam2) == 49) || (GetIdFromTalent(talentParam2) == 4))) {
			sub3(("GENERIC DEBUG *************** Lightsaber Throw Check = " + FloatToString(GetDistanceBetween(OBJECT_SELF, objectParam1), 4, 2)));
			if ((GetDistanceBetween(OBJECT_SELF, objectParam1) < 10.0)) {
				int1 = 1;
			}
		}
	}
	if ((int1 == 1)) {
		talent talBest = GetCreatureTalentBest(4356, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talentParam2) && GetCreatureHasTalent(talentParam2, OBJECT_SELF))) {
			return talBest;
		}
		else {
			talent talent3;
			return talent3;
		}
	}
	return talentParam2;
}

int sub30() {
	sub3("GENERIC DEBUG *************** Boss AI: Start Targeted Action Routine");
	talent talent1;
	object object1;
	int int1;
	int nRandom = d6(1);
	int int4 = 1;
	if ((nRandom < 4)) {
		nRandom = 1;
	}
	if ((nRandom == 4)) {
		nRandom = 2;
	}
	if ((nRandom == 5)) {
		nRandom = 3;
	}
	if ((nRandom == 6)) {
		nRandom = 4;
	}
	sub3((("GENERIC DEBUG *************** Boss AI: Get the #" + sub9(nRandom)) + " target"));
	object oNearest = GetNearestCreature(3, 1, OBJECT_SELF, int4, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
	sub3(("GENERIC DEBUG *************** Boss AI: Initial oFind Search = " + sub4(oNearest)));
	while ((GetIsObjectValid(oNearest) && (int4 <= nRandom))) {
		sub3(((("GENERIC DEBUG *************** Boss AI: Valid oFind = " + sub4(oNearest)) + " nCnt = ") + sub9(int4)));
		if (GetIsObjectValid(oNearest)) {
			sub3(("GENERIC DEBUG *************** Boss AI: Valid oTarget Set As = " + sub4(oNearest)));
			object1 = oNearest;
		}
		(int4++);
		oNearest = GetNearestCreature(3, 1, OBJECT_SELF, int4, 7, 7, 0xFFFFFFFF, 0xFFFFFFFF);
	}
	int int7 = 1;
	if ((int7 == 1)) {
		if (GetIsTalentValid(talent1)) {
			if ((GetTypeFromTalent(talent1) == 1)) {
				sub3(("GENERIC DEBUG *************** Boss AI: Talent Feat = " + sub9(GetIdFromTalent(talent1))));
			}
			else {
				if ((GetTypeFromTalent(talent1) == 0)) {
					sub3(("GENERIC DEBUG *************** Boss AI: Talent Power = " + sub9(GetIdFromTalent(talent1))));
				}
			}
		}
	}
	if (GetIsObjectValid(object1)) {
		if ((GetRacialType(object1) == 5)) {
			sub3("GENERIC DEBUG *************** Boss AI: Get Boss Combat Move AI Droid");
			int1 = 1;
		}
		talent1 = sub24(intGLOB_3, int1);
		talent1 = sub31(object1, talent1);
		talent1 = sub32(object1, talent1);
		sub3(("GENERIC DEBUG *************** Boss AI: Target = " + sub9(GetIsObjectValid(object1))));
		sub3(("GENERIC DEBUG *************** Boss AI: Talent = " + sub9(GetIsTalentValid(talent1))));
		if ((GetIsTalentValid(talent1) && GetIsObjectValid(object1))) {
			ClearAllActions();
			ActionUseTalentOnObject(talent1, object1);
			sub3("GENERIC DEBUG *************** Boss AI: Targeted Power Success");
			return 1;
		}
	}
	sub3("GENERIC DEBUG *************** Boss AI: Targeted Failure");
	return 0;
}

object sub29() {
	int int1 = 0;
	int int2 = 0;
	object object1;
	object oShapeObject = GetFirstObjectInShape(4, 30.0, GetLocation(OBJECT_SELF), 0, 1, [0.0,0.0,0.0]);
	while (GetIsObjectValid(oShapeObject)) {
		int1 = sub23(oShapeObject, 4.0);
		if (((int1 > 2) && (int2 < int1))) {
			object1 = oShapeObject;
			int2 = int1;
		}
		oShapeObject = GetNextObjectInShape(4, 30.0, GetLocation(OBJECT_SELF), 0, 1, [0.0,0.0,0.0]);
	}
	return object1;
}

int sub28() {
	sub3("GENERIC DEBUG *************** Boss AI: AOE Function Starting");
	talent talent1;
	object object1 = sub29();
	sub3(("GENERIC DEBUG *************** Boss AI: AOE Target = " + sub9(GetIsObjectValid(object1))));
	int int2;
	if (GetIsObjectValid(object1)) {
		if ((GetRacialType(object1) == 5)) {
			(int2 == 1);
		}
		talent1 = sub24(intGLOB_2, int2);
		if (GetIsTalentValid(talent1)) {
			ClearAllActions();
			ActionUseTalentOnObject(talent1, object1);
			sub3("GENERIC DEBUG *************** Boss AI: AOE Success");
			return 1;
		}
	}
	sub3("GENERIC DEBUG *************** Boss AI: AOE Failure");
	return 0;
}

talent sub27(int intParam1) {
	talent talRandom;
	int int1;
	int int2;
	int int3;
	int int4;
	int int5;
	int int6;
	int int7;
	int int8;
	int int9;
	int int10;
	int int11;
	int int12;
	int int13;
	int int14;
	int int15;
	int int16;
	int int17;
	if ((GetRacialType(OBJECT_SELF) == 5)) {
		talRandom = GetCreatureTalentRandom(32768, OBJECT_SELF, 0);
		if (GetIsTalentValid(talRandom)) {
			return talRandom;
		}
	}
	if ((GetHasSpell(9, OBJECT_SELF) && (int11 == 0))) {
		int1 = 1;
		(int14++);
	}
	if ((GetHasSpell(7, OBJECT_SELF) && (int11 == 0))) {
		int2 = 1;
		(int14++);
	}
	if ((GetHasSpell(38, OBJECT_SELF) && (int11 == 0))) {
		int3 = 1;
		(int14++);
	}
	if (GetHasSpell(23, OBJECT_SELF)) {
		int4 = 1;
		(int14++);
	}
	if (GetHasSpell(27, OBJECT_SELF)) {
		int5 = 1;
		(int14++);
	}
	if (GetHasSpell(35, OBJECT_SELF)) {
		int6 = 1;
		(int14++);
	}
	if ((GetHasSpell(32, OBJECT_SELF) && (int11 == 0))) {
		int7 = 1;
		(int14++);
	}
	if ((GetHasSpell(30, OBJECT_SELF) && (int11 == 0))) {
		int8 = 1;
		(int14++);
	}
	if ((GetHasSpell(50, OBJECT_SELF) && (int11 == 0))) {
		int9 = 1;
		(int14++);
	}
	if (GetHasSpell(29, OBJECT_SELF)) {
		int10 = 1;
		(int14++);
	}
	if ((GetHasSpell(12, OBJECT_SELF) && (int11 == 1))) {
		int11 = 1;
		(int14++);
	}
	talent talSpell = TalentSpell(83);
	if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
		int12 = 1;
		(int14++);
	}
	if ((GetHasSpell(159, OBJECT_SELF) && (int11 == 0))) {
		int15 = 1;
		(int14++);
	}
	if ((GetHasSpell(160, OBJECT_SELF) && (int11 == 0))) {
		int16 = 1;
		(int14++);
	}
	if ((GetHasSpell(161, OBJECT_SELF) && (int11 == 0))) {
		int17 = 1;
		(int14++);
	}
	int int35;
	if ((int14 > 0)) {
		int35 = (Random(int14) + 1);
	}
	else {
		int35 = 0;
	}
	if (((int1 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(9);
		(int35--);
	}
	if (((int1 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int2 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(7);
		(int35--);
	}
	if (((int2 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int3 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(38);
		(int35--);
	}
	if (((int3 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int4 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(23);
		(int35--);
	}
	if (((int4 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int5 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(27);
		(int35--);
	}
	if (((int5 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int6 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(35);
		(int35--);
	}
	if (((int6 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int7 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(32);
		(int35--);
	}
	if (((int7 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int8 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(30);
		(int35--);
	}
	if (((int8 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int9 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(50);
		(int35--);
	}
	if (((int9 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int10 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(29);
		(int35--);
	}
	if (((int10 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int11 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(12);
		(int35--);
	}
	if (((int11 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int12 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(83);
		(int35--);
	}
	if (((int12 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int15 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(159);
		(int35--);
	}
	if (((int15 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int16 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(160);
		(int35--);
	}
	if (((int16 == 1) && (int35 > 1))) {
		(int35--);
	}
	if (((int17 == 1) && (int35 == 1))) {
		talRandom = TalentSpell(161);
		(int35--);
	}
	if (((int17 == 1) && (int35 > 1))) {
		(int35--);
	}
	return talRandom;
}

talent sub26(int intParam1) {
	talent talent1;
	int int1;
	int int2;
	int int3;
	int int4;
	int int5;
	int int6;
	int int7;
	int int8;
	int int9;
	int int10;
	int int11;
	int int12;
	int int13;
	int int14;
	int nLastForce = GetLastForcePowerUsed(OBJECT_SELF);
	sub3(("GENERIC DEBUG *************** Last Force Power Used = " + sub9(nLastForce)));
	if (((GetHasSpell(30, OBJECT_SELF) && (intParam1 == 0)) && (nLastForce != 30))) {
		int1 = 1;
		(int11++);
	}
	if (((GetHasSpell(31, OBJECT_SELF) && (intParam1 == 0)) && (nLastForce != 31))) {
		int2 = 1;
		(int11++);
	}
	if ((GetHasSpell(25, OBJECT_SELF) && (nLastForce != 25))) {
		int3 = 1;
		(int11++);
	}
	if ((GetHasSpell(26, OBJECT_SELF) && (nLastForce != 26))) {
		int4 = 1;
		(int11++);
	}
	if ((GetHasSpell(4, OBJECT_SELF) && (nLastForce != 4))) {
		int5 = 1;
		(int11++);
	}
	if ((GetHasSpell(35, OBJECT_SELF) && (nLastForce != 35))) {
		int6 = 1;
		(int11++);
	}
	if (((GetHasSpell(44, OBJECT_SELF) && (intParam1 == 0)) && (nLastForce != 44))) {
		int7 = 1;
		(int11++);
	}
	if (((GetHasSpell(47, OBJECT_SELF) && (intParam1 == 1)) && (nLastForce != 47))) {
		int8 = 1;
		(int11++);
	}
	if (((GetHasSpell(13, OBJECT_SELF) && (intParam1 == 1)) && (nLastForce != 13))) {
		int9 = 1;
		(int11++);
	}
	talent talSpell = TalentSpell(131);
	if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
		int10 = 1;
		(int11++);
	}
	if (((GetHasSpell(159, OBJECT_SELF) && (intParam1 == 0)) && (nLastForce != 159))) {
		int12 = 1;
		(int11++);
	}
	if (((GetHasSpell(160, OBJECT_SELF) && (intParam1 == 0)) && (nLastForce != 160))) {
		int13 = 1;
		(int11++);
	}
	if (((GetHasSpell(161, OBJECT_SELF) && (intParam1 == 0)) && (nLastForce != 161))) {
		int14 = 1;
		(int11++);
	}
	int int30;
	if ((int11 > 0)) {
		int30 = (Random(int11) + 1);
	}
	else {
		int30 = 0;
	}
	if (((int1 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(30);
		(int30--);
	}
	if (((int1 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int2 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(31);
		(int30--);
	}
	if (((int1 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int3 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(25);
		(int30--);
	}
	if (((int3 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int4 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(26);
		(int30--);
	}
	if (((int4 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int5 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(4);
		(int30--);
	}
	if (((int5 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int6 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(35);
		(int30--);
	}
	if (((int6 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int7 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(44);
		(int30--);
	}
	if (((int7 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int8 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(47);
		(int30--);
	}
	if (((int8 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int9 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(13);
		(int30--);
	}
	if (((int9 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int9 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(131);
		(int30--);
	}
	if (((int10 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int12 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(159);
		(int30--);
	}
	if (((int12 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int13 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(160);
		(int30--);
	}
	if (((int13 == 1) && (int30 > 1))) {
		(int30--);
	}
	if (((int14 == 1) && (int30 == 1))) {
		talent1 = TalentSpell(161);
		(int30--);
	}
	if (((int14 == 1) && (int30 > 1))) {
		(int30--);
	}
	sub3(("GENERIC DEBUG *************** Force Power Returned = " + sub9(GetIdFromTalent(talent1))));
	return talent1;
}

talent sub25(int intParam1) {
	int int1 = 0;
	object oRArmItem = GetItemInSlot(7, OBJECT_SELF);
	if ((GetIsObjectValid(oRArmItem) && (GetBaseItemType(oRArmItem) == 91))) {
		int1 = 1;
	}
	else {
		oRArmItem = GetItemInSlot(8, OBJECT_SELF);
		if ((GetIsObjectValid(oRArmItem) && (GetBaseItemType(oRArmItem) == 91))) {
			int1 = 1;
		}
	}
	talent talSpell;
	talent talent2;
	int int6;
	int int7;
	int int8;
	int int9;
	int int10;
	int int11;
	int int12;
	int int13;
	int int14;
	int int15;
	int int16;
	int int17;
	int int18;
	int int19;
	int int20;
	int int21;
	int int22;
	int int23;
	int int24;
	int int25;
	int int26;
	int int27;
	int int28 = 0;
	int int29 = 87;
	int29;
	while ((int29 < 96)) {
		talSpell = TalentSpell(int29);
		if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
			switch (int29) {
				case 87:
					int6 = 1;
					(int28++);
					break;
				case 88:
					if ((intParam1 == 0)) {
						int7 = 1;
						(int28++);
					}
					break;
				case 89:
					int8 = 1;
					(int28++);
					break;
				case 90:
					if ((intParam1 == 0)) {
						int9 = 1;
						(int28++);
					}
					break;
				case 91:
					if ((intParam1 == 0)) {
						int10 = 1;
						(int28++);
					}
					break;
				case 92:
					if ((intParam1 == 0)) {
						int11 = 1;
						(int28++);
					}
					break;
				case 93:
					if ((intParam1 == 0)) {
						int12 = 1;
						(int28++);
					}
					break;
				case 94:
					int13 = 1;
					(int28++);
					break;
				case 95:
					if ((intParam1 == 1)) {
						int14 = 1;
						(int28++);
					}
					break;
			}
		}
		(int29++);
	}
	talSpell = TalentSpell(186);
	if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
		if ((intParam1 == 0)) {
			int15 = 1;
			(int28++);
		}
	}
	talSpell = TalentSpell(187);
	if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
		if ((intParam1 == 0)) {
			int16 = 1;
			(int28++);
		}
	}
	if (int1) {
		talSpell = TalentSpell(185);
		if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
			int17 = 1;
			(int28++);
		}
		int int34 = 190;
		int34;
		while ((int34 < 200)) {
			talSpell = TalentSpell(int34);
			if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
				switch (int34) {
					case 190:
						int18 = 1;
						(int28++);
						break;
					case 191:
						if ((intParam1 == 0)) {
							int19 = 1;
							(int28++);
						}
						break;
					case 192:
						if ((intParam1 == 1)) {
							int20 = 1;
							(int28++);
						}
						break;
					case 193:
						int21 = 1;
						(int28++);
						break;
					case 194:
						int22 = 1;
						(int28++);
						break;
					case 195:
						if ((intParam1 == 0)) {
							int23 = 1;
							(int28++);
						}
						break;
					case 196:
						if ((intParam1 == 0)) {
							int24 = 1;
							(int28++);
						}
						break;
					case 197:
						if ((intParam1 == 0)) {
							int25 = 1;
							(int28++);
						}
						break;
					case 198:
						if ((intParam1 == 0)) {
							int26 = 1;
							(int28++);
						}
						break;
					case 199:
						int27 = 1;
						(int28++);
						break;
				}
			}
			(int34++);
		}
	}
	int int36;
	if ((int28 > 0)) {
		int36 = (Random(int28) + 1);
	}
	else {
		int36 = 0;
	}
	if ((int28 > 0)) {
		if (((int36 == 1) && (int17 == 1))) {
			return talSpell = TalentSpell(185);
		}
		if (((int36 > 1) && (int17 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int18 == 1))) {
			return talSpell = TalentSpell(190);
		}
		if (((int36 > 1) && (int18 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int19 == 1))) {
			return talSpell = TalentSpell(191);
		}
		if (((int36 > 1) && (int19 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int20 == 1))) {
			return talSpell = TalentSpell(192);
		}
		if (((int36 > 1) && (int20 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int21 == 1))) {
			return talSpell = TalentSpell(193);
		}
		if (((int36 > 1) && (int21 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int22 == 1))) {
			return talSpell = TalentSpell(194);
		}
		if (((int36 > 1) && (int22 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int23 == 1))) {
			return talSpell = TalentSpell(195);
		}
		if (((int36 > 1) && (int23 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int24 == 1))) {
			return talSpell = TalentSpell(196);
		}
		if (((int36 > 1) && (int24 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int25 == 1))) {
			return talSpell = TalentSpell(197);
		}
		if (((int36 > 1) && (int25 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int26 == 1))) {
			return talSpell = TalentSpell(198);
		}
		if (((int36 > 1) && (int26 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int27 == 1))) {
			return talSpell = TalentSpell(199);
		}
		if (((int36 > 1) && (int27 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int6 == 1))) {
			return talSpell = TalentSpell(87);
		}
		if (((int36 > 1) && (int6 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int7 == 1))) {
			return talSpell = TalentSpell(88);
		}
		if (((int36 > 1) && (int7 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int8 == 1))) {
			return talSpell = TalentSpell(89);
		}
		if (((int36 > 1) && (int8 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int9 == 1))) {
			return talSpell = TalentSpell(90);
		}
		if (((int36 > 1) && (int9 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int10 == 1))) {
			return talSpell = TalentSpell(91);
		}
		if (((int36 > 1) && (int10 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int11 == 1))) {
			return talSpell = TalentSpell(92);
		}
		if (((int36 > 1) && (int11 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int12 == 1))) {
			return talSpell = TalentSpell(93);
		}
		if (((int36 > 1) && (int12 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int13 == 1))) {
			return talSpell = TalentSpell(94);
		}
		if (((int36 > 1) && (int13 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int15 == 1))) {
			return talSpell = TalentSpell(186);
		}
		if (((int36 > 1) && (int15 == 1))) {
			(int36--);
		}
		if (((int36 == 1) && (int16 == 1))) {
			return talSpell = TalentSpell(187);
		}
		if (((int36 > 1) && (int16 == 1))) {
			(int36--);
		}
	}
	sub3("GENERIC DEBUG *************** Grenade Selection Failure");
	return talent2;
}

talent sub24(int intParam1, int intParam2) {
	talent talent1;
	talent talRandom;
	int int1 = 0;
	if (((intParam1 == intGLOB_1) || (intParam1 == intGLOB_5))) {
		talRandom = sub25(intParam2);
		if (GetIsTalentValid(talRandom)) {
			sub3("GENERIC DEBUG *************** Boss AI: Grenade Talent Chosen");
			return talRandom;
		}
	}
	if (((intParam1 == intGLOB_2) || (intParam1 == intGLOB_5))) {
		talRandom = sub26(intParam2);
		if (GetIsTalentValid(talRandom)) {
			sub3("GENERIC DEBUG *************** Boss AI: AOE Force Power Talent Chosen");
			return talRandom;
		}
	}
	if (((intParam1 == intGLOB_3) || (intParam1 == intGLOB_5))) {
		if ((d100(1) > 50)) {
			talRandom = sub27(intParam2);
			if (GetIsTalentValid(talRandom)) {
				sub3("GENERIC DEBUG *************** Boss AI: Targeted Force Power Talent Chosen");
				return talRandom;
			}
			talRandom = sub26(intParam2);
			if (GetIsTalentValid(talRandom)) {
				sub3("GENERIC DEBUG *************** Boss AI: AOE Force Power Talent Chosen");
				return talRandom;
			}
		}
		if ((sub19(OBJECT_SELF) == 1)) {
			sub3("GENERIC DEBUG *************** Boss AI: Melee Feat Talent Chosen");
			talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
		}
		else {
			sub3("GENERIC DEBUG *************** Boss AI: Range Feat Talent Chosen");
			talRandom = GetCreatureTalentRandom(4369, OBJECT_SELF, 0);
		}
		if (GetIsTalentValid(talRandom)) {
			return talRandom;
		}
	}
	else {
		if (((intParam1 == intGLOB_4) || (intParam1 == intGLOB_5))) {
			if ((d100(1) > 70)) {
				talRandom = sub27(intParam2);
				if (GetIsTalentValid(talRandom)) {
					return talRandom;
				}
				talRandom = sub26(intParam2);
				if (GetIsTalentValid(talRandom)) {
					return talRandom;
				}
			}
			talRandom = GetCreatureTalentRandom(4356, OBJECT_SELF, 0);
			if (GetIsTalentValid(talRandom)) {
				return talRandom;
			}
			sub3("GENERIC DEBUG *************** Boss AI: No Feats Available");
		}
	}
	return talRandom;
}

int sub23(object objectParam1, float floatParam2) {
	int int1;
	object oShapeObject = GetFirstObjectInShape(4, floatParam2, GetLocation(objectParam1), 0, 1, [0.0,0.0,0.0]);
	while (GetIsObjectValid(oShapeObject)) {
		if ((GetIsEnemy(oShapeObject, OBJECT_SELF) && (!GetIsDead(oShapeObject)))) {
			(int1++);
		}
		oShapeObject = GetNextObjectInShape(4, floatParam2, GetLocation(objectParam1), 0, 1, [0.0,0.0,0.0]);
	}
	return int1;
}

int sub22(object objectParam1, float floatParam2) {
	int int1;
	int int2;
	int nLevel = GetHitDice(OBJECT_SELF);
	object oShapeObject = GetFirstObjectInShape(4, floatParam2, GetLocation(objectParam1), 0, 1, [0.0,0.0,0.0]);
	while (GetIsObjectValid(oShapeObject)) {
		if ((GetIsFriend(oShapeObject, OBJECT_SELF) && (!GetIsDead(oShapeObject)))) {
			(int1++);
		}
		oShapeObject = GetNextObjectInShape(4, floatParam2, GetLocation(objectParam1), 0, 1, [0.0,0.0,0.0]);
	}
	return int1;
}

object sub21() {
	int int1 = 0;
	if (IsObjectPartyMember(OBJECT_SELF)) {
		int1 = 1;
	}
	int int3 = 0;
	int int4 = 0;
	int int5 = 0;
	object object1;
	object oShapeObject = GetFirstObjectInShape(4, 40.0, GetLocation(OBJECT_SELF), 0, 1, [0.0,0.0,0.0]);
	while (GetIsObjectValid(oShapeObject)) {
		if ((GetObjectSeen(oShapeObject, OBJECT_SELF) && (!GetIsDead(oShapeObject)))) {
			int3 = sub22(oShapeObject, 4.0);
			int4 = sub23(oShapeObject, 4.0);
			if ((((int4 > int1) && (int3 == 0)) && (int5 < int4))) {
				object1 = oShapeObject;
				int5 = int4;
			}
		}
		oShapeObject = GetNextObjectInShape(4, 40.0, GetLocation(OBJECT_SELF), 0, 1, [0.0,0.0,0.0]);
	}
	return object1;
}

int sub20() {
	sub3("GENERIC DEBUG *************** Boss AI: Grenade Function Starting");
	talent talent1;
	object object1 = sub21();
	sub3(("GENERIC DEBUG *************** Boss AI: Grenade Target = " + sub9(GetIsObjectValid(object1))));
	int int2;
	if (GetIsObjectValid(object1)) {
		if ((GetRacialType(object1) == 5)) {
			(int2 == 1);
		}
		talent1 = sub24(intGLOB_1, int2);
		if (GetIsTalentValid(talent1)) {
			sub3("GENERIC DEBUG *************** Clear 1460");
			ClearAllActions();
			ActionUseTalentOnObject(talent1, object1);
			sub3("GENERIC DEBUG *************** Boss AI: AOE Success");
			return 1;
		}
	}
	sub3("GENERIC DEBUG *************** Boss AI: AOE Failure");
	return 0;
}

int sub19(object objectParam1) {
	object oRWeapItem = GetItemInSlot(4, objectParam1);
	int nItemType = GetBaseItemType(oRWeapItem);
	if (GetIsObjectValid(oRWeapItem)) {
		if (((((((((((((((nItemType == 20) || (nItemType == 12)) || (nItemType == 77)) || (nItemType == 19)) || (nItemType == 16)) || (nItemType == 21)) || (nItemType == 13)) || (nItemType == 24)) || (nItemType == 14)) || (nItemType == 15)) || (nItemType == 18)) || (nItemType == 23)) || (nItemType == 17)) || (nItemType == 22))) {
			return 2;
		}
		else {
			if ((((((((((((((((nItemType == 9) || (nItemType == 6)) || (nItemType == 80)) || (nItemType == 78)) || (nItemType == 8)) || (nItemType == 2)) || (nItemType == 0)) || (nItemType == 10)) || (nItemType == 4)) || (nItemType == 1)) || (nItemType == 5)) || (nItemType == 7)) || (nItemType == 3)) || (nItemType == 79)) || (nItemType == 93))) {
				return 1;
			}
		}
	}
	sub3("GENERIC DEBUG *************** Return No Weapon Type");
	return 0;
}

int sub18() {
	object oInvItem;
	if (((((GetIsObjectValid(GetAttackTarget(OBJECT_SELF)) && (GetDistanceBetween(GetAttackTarget(OBJECT_SELF), OBJECT_SELF) <= 3.0)) && (sub19(OBJECT_SELF) != 1)) && (GetRacialType(OBJECT_SELF) == 6)) && (!IsObjectPartyMember(OBJECT_SELF)))) {
		oInvItem = GetFirstItemInInventory(OBJECT_SELF);
		while (GetIsObjectValid(oInvItem)) {
			sub3("GENERIC DEBUG *************** Checking Melee Weapon");
			if ((((((((((((((((GetBaseItemType(oInvItem) == 9) || (GetBaseItemType(oInvItem) == 6)) || (GetBaseItemType(oInvItem) == 80)) || (GetBaseItemType(oInvItem) == 78)) || (GetBaseItemType(oInvItem) == 8)) || (GetBaseItemType(oInvItem) == 2)) || (GetBaseItemType(oInvItem) == 0)) || (GetBaseItemType(oInvItem) == 10)) || (GetBaseItemType(oInvItem) == 4)) || (GetBaseItemType(oInvItem) == 1)) || (GetBaseItemType(oInvItem) == 5)) || (GetBaseItemType(oInvItem) == 7)) || (GetBaseItemType(oInvItem) == 3)) || (GetBaseItemType(oInvItem) == 79)) || (GetBaseItemType(oInvItem) == 93))) {
				sub3("GENERIC DEBUG *************** Equipping Melee Weapon");
				ActionEquipMostDamagingMelee(OBJECT_INVALID, 0);
				return 1;
			}
			else {
				oInvItem = GetNextItemInInventory(OBJECT_SELF);
			}
		}
	}
	else {
		if (((((((((((((sub19(OBJECT_SELF) != 2) && (GetLevelByClass(4, OBJECT_SELF) == 0)) && (GetLevelByClass(3, OBJECT_SELF) == 0)) && (GetLevelByClass(5, OBJECT_SELF) == 0)) && (GetLevelByClass(11, OBJECT_SELF) == 0)) && (GetLevelByClass(12, OBJECT_SELF) == 0)) && (GetLevelByClass(13, OBJECT_SELF) == 0)) && (GetLevelByClass(14, OBJECT_SELF) == 0)) && (GetLevelByClass(15, OBJECT_SELF) == 0)) && (GetLevelByClass(16, OBJECT_SELF) == 0)) && (GetDistanceBetween(GetAttemptedAttackTarget(), OBJECT_SELF) > 3.0)) && (!IsObjectPartyMember(OBJECT_SELF)))) {
			oInvItem = GetFirstItemInInventory(OBJECT_SELF);
			while (GetIsObjectValid(oInvItem)) {
				sub3("GENERIC DEBUG *************** Checking Ranged Weapon");
				if (((((((((((((((GetBaseItemType(oInvItem) == 20) || (GetBaseItemType(oInvItem) == 12)) || (GetBaseItemType(oInvItem) == 77)) || (GetBaseItemType(oInvItem) == 19)) || (GetBaseItemType(oInvItem) == 16)) || (GetBaseItemType(oInvItem) == 21)) || (GetBaseItemType(oInvItem) == 13)) || (GetBaseItemType(oInvItem) == 24)) || (GetBaseItemType(oInvItem) == 14)) || (GetBaseItemType(oInvItem) == 15)) || (GetBaseItemType(oInvItem) == 18)) || (GetBaseItemType(oInvItem) == 23)) || (GetBaseItemType(oInvItem) == 17)) || (GetBaseItemType(oInvItem) == 22))) {
					sub3("GENERIC DEBUG *************** Equipping Ranged Weapon");
					ActionEquipMostDamagingRanged(OBJECT_INVALID);
					return 1;
				}
				else {
					oInvItem = GetNextItemInInventory(OBJECT_SELF);
				}
			}
		}
	}
	sub3("GENERIC DEBUG *************** Should not currently change weapons");
	return 0;
}

object sub17(int intParam1) {
	object oNPC = GetPartyMemberByIndex(0);
	object object3 = GetPartyMemberByIndex(1);
	object object5 = GetPartyMemberByIndex(2);
	object oNearest;
	int int1 = 0;
	int nRandom;
	int int3 = 0;
	int int4 = 0;
	int int5 = 0;
	if (((GetIsObjectValid(object3) && (GetCurrentHitPoints(object3) > 0)) && GetObjectSeen(object3, OBJECT_SELF))) {
		if (((GetRacialType(object3) != 5) || (intParam1 == 0))) {
			(int1++);
			int4 = 1;
		}
	}
	if (((GetIsObjectValid(object5) && (GetCurrentHitPoints(object5) > 0)) && GetObjectSeen(object5, OBJECT_SELF))) {
		if (((GetRacialType(object5) != 5) || (intParam1 == 0))) {
			(int1++);
			int5 = 1;
		}
	}
	if ((intParam1 == 1)) {
		if (((GetIsObjectValid(oNPC) && (GetCurrentHitPoints(oNPC) > 0)) && GetObjectSeen(oNPC, OBJECT_SELF))) {
			if ((GetRacialType(oNPC) != 5)) {
				(int1++);
				int3 = 1;
			}
		}
	}
	if ((int1 == 0)) {
		oNearest = OBJECT_INVALID;
	}
	else {
		if ((int1 == 1)) {
			if ((int4 == 1)) {
				oNearest = object3;
			}
			else {
				if ((int5 == 1)) {
					oNearest = object5;
				}
				else {
					if ((int3 == 1)) {
						oNearest = oNPC;
					}
				}
			}
		}
		else {
			if ((int1 == 2)) {
				nRandom = d100(1);
				if (((int3 == 1) && (int4 == 1))) {
					if ((nRandom > 50)) {
						oNearest = oNPC;
					}
					else {
						oNearest = object3;
					}
				}
				else {
					if (((int3 == 1) && (int5 == 1))) {
						if ((nRandom > 50)) {
							oNearest = oNPC;
						}
						else {
							oNearest = object5;
						}
					}
					else {
						if (((int4 == 1) && (int5 == 1))) {
							if ((nRandom > 50)) {
								oNearest = object3;
							}
							else {
								oNearest = object5;
							}
						}
					}
				}
			}
			else {
				if ((int1 == 3)) {
					nRandom = d100(1);
					if ((nRandom <= 33)) {
						oNearest = oNPC;
					}
					else {
						if (((nRandom > 33) && (nRandom <= 66))) {
							oNearest = object3;
						}
						else {
							if (((nRandom > 66) && (nRandom <= 100))) {
								oNearest = object5;
							}
						}
					}
				}
			}
		}
	}
	if (((!GetIsEnemy(oNearest, OBJECT_SELF)) && (intParam1 == 1))) {
		sub3("GENERIC DEBUG *************** Searching for Alternate Target");
		oNearest = GetNearestCreature(3, 1, OBJECT_SELF, 1, 0, 6, 0xFFFFFFFF, 0xFFFFFFFF);
		sub3(("GENERIC DEBUG *************** Alternate Target = " + sub4(oNearest)));
	}
	sub3(("GENERIC DEBUG *************** Heal Drain Target = " + sub9(intParam1)));
	sub3(("GENERIC DEBUG *************** Get Active Party Member: " + sub4(oNearest)));
	return oNearest;
}

int sub16() {
	if (GetHasSpell(175, OBJECT_SELF)) {
		return 175;
	}
	else {
		if (GetHasSpell(174, OBJECT_SELF)) {
			return 174;
		}
		else {
			if (GetHasSpell(173, OBJECT_SELF)) {
				return 173;
			}
		}
	}
	return (-1);
}

int sub15(int intParam1, object objectParam2) {
	if (GetIsObjectValid(objectParam2)) {
		talent talSpell;
		talent talent2;
		talent talent3;
		talent talent4;
		talent talBest;
		talent talent6;
		talent talent7;
		talent talent8;
		int int2;
		int int3 = 0;
		int int4 = 0;
		if ((intParam1 == intGLOB_124)) {
			int2 = 61473;
		}
		else {
			if ((intParam1 == intGLOB_125)) {
				int3 = 0;
				talSpell = TalentSpell(28);
				talent2 = TalentSpell(10);
				talent3 = TalentSpell(67);
				talent4 = TalentSpell(134);
				if (((GetCreatureHasTalent(talSpell, OBJECT_SELF) || GetCreatureHasTalent(talent2, OBJECT_SELF)) || GetCreatureHasTalent(talent4, OBJECT_SELF))) {
					int3 = 1;
					if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
						talent8 = talSpell;
					}
					else {
						if (GetCreatureHasTalent(talent2, OBJECT_SELF)) {
							talent8 = talent2;
						}
						else {
							if (GetCreatureHasTalent(talent4, OBJECT_SELF)) {
								talent8 = talent4;
							}
						}
					}
				}
				else {
					if ((GetCreatureHasTalent(talent3, OBJECT_SELF) && (objectParam2 == OBJECT_SELF))) {
						int3 = 1;
						talent8 = talent3;
					}
				}
			}
			else {
				if ((intParam1 == intGLOB_126)) {
					int3 = 0;
					sub3(("GENERIC DEBUG *************** Starting Heal Talent Checks " + sub4(OBJECT_SELF)));
					talSpell = TalentSpell(28);
					talent2 = TalentSpell(10);
					talent3 = TalentSpell(134);
					if ((GetRacialType(OBJECT_SELF) != 5)) {
						talBest = GetCreatureTalentBest(5128, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
					}
					else {
						talBest = TalentSpell(128);
						if ((!GetCreatureHasTalent(talBest, OBJECT_SELF))) {
							talBest = TalentSpell(127);
							if ((!GetCreatureHasTalent(talBest, OBJECT_SELF))) {
								talBest = TalentSpell(84);
							}
						}
					}
					talent6 = TalentSpell(15);
					talent7 = TalentSpell(11);
					talent8;
					int3 = 0;
					if (((GetCreatureHasTalent(talSpell, OBJECT_SELF) || GetCreatureHasTalent(talent2, OBJECT_SELF)) || GetCreatureHasTalent(talent3, OBJECT_SELF))) {
						sub3("GENERIC DEBUG *************** I have Heal, Improved Heal, or Master Heal");
						int3 = 1;
						if (GetCreatureHasTalent(talent3, OBJECT_SELF)) {
							talent8 = talent3;
						}
						else {
							if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
								talent8 = talSpell;
							}
							else {
								if (GetCreatureHasTalent(talent2, OBJECT_SELF)) {
									talent8 = talent2;
								}
							}
						}
					}
					else {
						if (((GetCreatureHasTalent(talBest, OBJECT_SELF) || GetCreatureHasTalent(talent6, OBJECT_SELF)) || GetCreatureHasTalent(talent7, OBJECT_SELF))) {
							if ((objectParam2 == OBJECT_SELF)) {
								if ((GetCreatureHasTalent(talent7, OBJECT_SELF) && (!IsObjectPartyMember(OBJECT_SELF)))) {
									sub3("GENERIC DEBUG *************** I have Death Field");
									int3 = 1;
									int4 = 1;
									talent8 = talent7;
								}
								else {
									if ((GetCreatureHasTalent(talent6, OBJECT_SELF) && (!IsObjectPartyMember(OBJECT_SELF)))) {
										sub3("GENERIC DEBUG *************** I have Drain Life");
										int3 = 1;
										int4 = 1;
										talent8 = talent6;
									}
									else {
										sub3("GENERIC DEBUG *************** I have a Med Pack");
										int3 = 1;
										talent8 = talBest;
									}
								}
							}
						}
					}
				}
				else {
					if ((intParam1 == intGLOB_128)) {
						int int28 = sub16();
						talent8 = TalentSpell(int28);
						int3 = 1;
						int4 = 0;
						AurPostString("Setting up to revitalize.", 20, 26, 5.0);
					}
					else {
						if ((intParam1 == intGLOB_127)) {
							int3 = 0;
							int int30 = 0;
							talent talent23;
							talent talent24;
							talent talent25;
							talent talent26;
							talent talent27;
							talent talent28;
							if ((GetFirstPC() == OBJECT_SELF)) {
								int30 = (Random(10000) % 9);
							}
							else {
								int30 = (Random(10000) % 6);
							}
							if ((int30 == 0)) {
								talent23 = TalentSpell(8);
								talent24 = TalentSpell(34);
								talent25 = TalentSpell(37);
							}
							else {
								if ((int30 == 1)) {
									talent23 = TalentSpell(18);
									talent24 = TalentSpell(24);
									talent25 = TalentSpell(17);
								}
								else {
									if ((int30 == 2)) {
										talent23 = TalentSpell(22);
										talent24 = TalentSpell(33);
										talent25 = TalentSpell(36);
									}
									else {
										if ((int30 == 3)) {
											talent23 = TalentSpell(42);
											talent24 = TalentSpell(40);
											talent25 = TalentSpell(133);
										}
										else {
											if ((int30 == 4)) {
												talent23 = TalentSpell(135);
												talent24 = TalentSpell(136);
												talent25 = TalentSpell(137);
											}
											else {
												if ((int30 == 5)) {
													talent23 = TalentSpell(138);
													talent24 = TalentSpell(139);
													talent25 = TalentSpell(140);
												}
												else {
													if ((int30 == 6)) {
														talent23 = TalentSpell(144);
														talent24 = TalentSpell(145);
														talent25 = TalentSpell(146);
														talent26 = TalentSpell(147);
														talent27 = TalentSpell(148);
														talent28 = TalentSpell(149);
													}
													else {
														if ((int30 == 7)) {
															talent23 = TalentSpell(167);
															talent24 = TalentSpell(168);
															talent25 = TalentSpell(169);
															talent26 = TalentSpell(170);
															talent27 = TalentSpell(171);
															talent28 = TalentSpell(172);
														}
														else {
															if ((int30 == 8)) {
																talent23 = TalentSpell(164);
																talent24 = TalentSpell(165);
																talent25 = TalentSpell(166);
															}
														}
													}
												}
											}
										}
									}
								}
							}
							talent talent62;
							if ((GetIsTalentValid(talent28) && GetCreatureHasTalent(talent28, OBJECT_SELF))) {
								talent62 = talent28;
							}
							else {
								if ((GetIsTalentValid(talent27) && GetCreatureHasTalent(talent28, OBJECT_SELF))) {
									talent62 = talent27;
								}
								else {
									if ((GetIsTalentValid(talent26) && GetCreatureHasTalent(talent26, OBJECT_SELF))) {
										talent62 = talent26;
									}
									else {
										if ((GetIsTalentValid(talent25) && GetCreatureHasTalent(talent25, OBJECT_SELF))) {
											talent62 = talent25;
										}
										else {
											if ((GetIsTalentValid(talent24) && GetCreatureHasTalent(talent24, OBJECT_SELF))) {
												talent62 = talent24;
											}
											else {
												if ((GetIsTalentValid(talent23) && GetCreatureHasTalent(talent23, OBJECT_SELF))) {
													talent62 = talent23;
												}
											}
										}
									}
								}
							}
							if (GetIsTalentValid(talent62)) {
								int nTalent = GetIdFromTalent(talent62);
								effect efNext = GetFirstEffect(OBJECT_SELF);
								int int48 = 0;
								while (GetIsEffectValid(efNext)) {
									(int48++);
									if ((GetEffectSpellId(efNext) == nTalent)) {
										talent62 = TalentSpell((-1));
										break;
									}
									efNext = GetNextEffect(OBJECT_SELF);
								}
							}
							if (GetIsTalentValid(talent62)) {
								int nBaseFP = GetSpellBaseForcePointCost(GetIdFromTalent(talent62));
								if ((nBaseFP <= GetCurrentForcePoints(OBJECT_SELF))) {
									int3 = 1;
									talent8 = talent62;
								}
							}
						}
					}
				}
			}
		}
		if (((int3 == 1) && (int4 == 0))) {
			sub3("GENERIC DEBUG *************** Clear 2300");
			int int56 = GetIdFromTalent(talent8);
			sub3(("GENERIC DEBUG *************** Spells.2DA ID = " + sub9(int56)));
			ClearAllActions();
			ActionUseTalentOnObject(talent8, OBJECT_SELF);
			return 1;
		}
		else {
			if (((int3 == 1) && (int4 == 1))) {
				objectParam2 = sub17(1);
				if (GetIsObjectValid(objectParam2)) {
					sub3(("GENERIC DEBUG *************** Hostile Heal Targeted On: " + sub4(objectParam2)));
					sub3("GENERIC DEBUG *************** Clear 2400");
					ClearAllActions();
					ActionUseTalentOnObject(talent8, objectParam2);
					return 1;
				}
			}
		}
		talent talent64 = GetCreatureTalentBest(int2, 20, OBJECT_SELF, 0, 0xFFFFFFFF, 0xFFFFFFFF);
		if ((GetIsTalentValid(talent8) && (!GetHasSpellEffect(GetIdFromTalent(talent8), OBJECT_SELF)))) {
			if (GetIsObjectValid(objectParam2)) {
				sub3("GENERIC DEBUG *************** Clear 2500");
				ClearAllActions();
				sub3(((("GENERIC DEBUG *************** Target = " + GetName(objectParam2)) + " Talent Code = ") + IntToString(int2)));
				ActionUseTalentOnObject(talent8, OBJECT_SELF);
				return 1;
			}
		}
	}
	sub3(((((("GENERIC DEBUG *************** " + sub4(OBJECT_SELF)) + " VP = ") + sub9(GetCurrentHitPoints(OBJECT_SELF))) + "/") + sub9(GetMaxHitPoints(OBJECT_SELF))));
	sub3("GENERIC DEBUG *************** Healing Not Used");
	return 0;
}

object sub14() {
	sub3("GENERIC DEBUG ***************  Starting Injury Check Function");
	if (IsObjectPartyMember(OBJECT_SELF)) {
		object oNPC = GetPartyMemberByIndex(0);
		object object3 = GetPartyMemberByIndex(1);
		object object5 = GetPartyMemberByIndex(2);
		float float1 = 10.0;
		float float2 = 10.0;
		float float3 = 10.0;
		if ((GetIsObjectValid(oNPC) && (GetRacialType(oNPC) != 5))) {
			float1 = (IntToFloat(GetCurrentHitPoints(oNPC)) / IntToFloat(GetMaxHitPoints(oNPC)));
		}
		if ((GetIsObjectValid(object3) && (GetRacialType(oNPC) != 5))) {
			float2 = (IntToFloat(GetCurrentHitPoints(object3)) / IntToFloat(GetMaxHitPoints(object3)));
		}
		if ((GetIsObjectValid(object5) && (GetRacialType(oNPC) != 5))) {
			float3 = (IntToFloat(GetCurrentHitPoints(object5)) / IntToFloat(GetMaxHitPoints(object5)));
		}
		if (((GetIsObjectValid(oNPC) && (!GetIsDead(oNPC))) && ((float1 < 0.5) && (float1 > 0.0)))) {
			sub3("GENERIC DEBUG ***************  Return oP0");
			return oNPC;
		}
		else {
			if (((GetIsObjectValid(object3) && (!GetIsDead(object3))) && ((float1 < 0.5) && (float1 > 0.0)))) {
				sub3("GENERIC DEBUG ***************  Return oP1");
				return object3;
			}
			else {
				if (((GetIsObjectValid(object5) && (!GetIsDead(object5))) && ((float1 < 0.5) && (float1 > 0.0)))) {
					sub3("GENERIC DEBUG ***************  Return oP2");
					return object5;
				}
			}
		}
	}
	else {
		float float10 = (IntToFloat(GetCurrentHitPoints(OBJECT_SELF)) / IntToFloat(GetMaxHitPoints(OBJECT_SELF)));
		if ((float10 < 0.5)) {
			return OBJECT_SELF;
		}
	}
	return OBJECT_INVALID;
}

int sub13(int intParam1) {
	sub3("GENERIC DEBUG *************** Boss AI Start");
	object object1 = sub14();
	if (GetIsObjectValid(object1)) {
		if (sub15(intGLOB_126, object1)) {
			return 1;
		}
	}
	if (sub18()) {
		sub3("GENERIC DEBUG *************** Switching Weapons");
	}
	if ((sub20() == 1)) {
		return 1;
	}
	else {
		if ((sub28() == 1)) {
			return 1;
		}
		else {
			if ((sub30() == 1)) {
				return 1;
			}
		}
	}
	sub3("GENERIC DEBUG *************** Boss AI: Fall Through");
	return sub33(OBJECT_INVALID);
}

int sub12() {
	sub3("GENERIC DEBUG *************** Malak AI Start");
	int nGlobal = GetGlobalNumber("K_END_JEDI_LEFT");
	int int3 = GetGlobalNumber("K_END_MALAK_JEDI_USED");
	object oPC = GetFirstPC();
	int int5;
	int int6;
	int int7;
	float fDistance = GetDistanceBetween(OBJECT_SELF, oPC);
	if (((8 - nGlobal) < int3)) {
		int5 = 1;
	}
	sub3(("GENERIC DEBUG *************** Malak Distance to PC = " + FloatToString(GetDistanceBetween(OBJECT_SELF, oPC), 4, 4)));
	if ((fDistance > 10.0)) {
		int6 = 1;
	}
	if ((int6 == 1)) {
		sub3("GENERIC DEBUG *************** Clear 1480");
		ClearAllActions();
		if (((GetHasSpellEffect(8, oPC) || GetHasSpellEffect(34, oPC)) || GetHasSpellEffect(37, oPC))) {
			talent talSpell = TalentSpell(19);
			if (GetIsTalentValid(talSpell)) {
				sub3("GENERIC DEBUG *************** Using Breach");
				ActionUseTalentOnObject(talSpell, oPC);
			}
			int7 = 1;
		}
		else {
			if ((fDistance > 10.0)) {
				int nRandom = d3(1);
				int int14 = (-1);
				if ((nRandom == 1)) {
					int14 = 35;
				}
				else {
					if ((nRandom == 2)) {
						int14 = 49;
					}
					else {
						if ((nRandom > 2)) {
							int7 = 1;
						}
					}
				}
				if ((int14 != (-1))) {
					talent talent3 = TalentSpell(int14);
					if (GetIsTalentValid(talent3)) {
						sub3("GENERIC DEBUG *************** Malak Using Force Power");
						ActionUseTalentOnObject(talent3, oPC);
						return 1;
					}
				}
			}
			int7 = 1;
		}
	}
	if ((int7 == 1)) {
		sub3("GENERIC DEBUG *************** Malak Attacking");
		ActionAttack(oPC, 0);
		return 1;
	}
	sub3("GENERIC DEBUG *************** Malak AI Drop Out");
	return 0;
}

int sub11() {
	int int1 = 0;
	if (((sub7(intGLOB_119) == 0) && (!IsObjectPartyMember(OBJECT_SELF)))) {
		if (((GetHitDice(GetFirstPC()) >= 15) || sub7(intGLOB_116))) {
			talent talSpell = TalentSpell(41);
			talent talent3 = TalentSpell(20);
			talent talent5;
			if (GetCreatureHasTalent(talent3, OBJECT_SELF)) {
				talent5 = talent3;
				int1 = 1;
			}
			else {
				if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
					talent5 = talSpell;
					int1 = 1;
				}
			}
			if ((int1 == 1)) {
				sub3("GENERIC DEBUG *************** Clear 1710");
				ClearAllActions();
				ActionUseTalentOnObject(talent5, OBJECT_SELF);
			}
			sub10(intGLOB_119, 1);
		}
	}
	return int1;
}

void sub10(int intParam1, int intParam2) {
	SetLocalBoolean(OBJECT_SELF, intParam1, intParam2);
}

string sub9(int intParam1) {
	return IntToString(intParam1);
}

int sub8() {
	sub3("GENERIC DEBUG *************** Starting Forcefield Search");
	sub3(((("GENERIC DEBUG *************** Shield Boolean (" + sub9(intGLOB_117)) + ") = ") + sub9(sub7(intGLOB_117))));
	if (((sub7(intGLOB_117) == 0) && (!IsObjectPartyMember(OBJECT_SELF)))) {
		int int4;
		int int5;
		int int6 = 0;
		talent talSpell;
		if ((GetRacialType(OBJECT_SELF) == 5)) {
			int4 = 110;
			int5 = 115;
		}
		else {
			int4 = 99;
			int5 = 107;
		}
		while (((int6 == 0) && (int4 <= int5))) {
			talSpell = TalentSpell(int4);
			if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
				int6 = 1;
			}
			else {
				(int4++);
			}
		}
		if ((!int6)) {
			talSpell = TalentSpell(132);
			if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
				int6 = 1;
			}
			if ((!int6)) {
				talSpell = TalentSpell(257);
				if (GetCreatureHasTalent(talSpell, OBJECT_SELF)) {
					int6 = 1;
				}
			}
		}
		if (int6) {
			sub3("GENERIC DEBUG *************** Clear 1700");
			ClearAllActions();
			ActionUseTalentOnObject(talSpell, OBJECT_SELF);
			sub10(intGLOB_117, 1);
			return 1;
		}
		else {
			sub3("GENERIC DEBUG *************** Forcefield Search Fallthrough");
			sub10(intGLOB_117, 1);
			return 0;
		}
	}
	sub3("GENERIC DEBUG *************** Forcefield Search Fallthrough");
	return 0;
}

int sub7(int intParam1) {
	int nLocalBool = GetLocalBoolean(OBJECT_SELF, intParam1);
	if ((nLocalBool > 0)) {
		return 1;
	}
	return 0;
}

string sub6(object objectParam1) {
	if ((GetNPCAIStyle(objectParam1) == 3)) {
		return "NPC_AISTYLE_AID";
	}
	else {
		if ((GetNPCAIStyle(objectParam1) == 4)) {
			return "NPC_AISTYLE_GRENADE_THROWER";
		}
		else {
			if ((GetNPCAIStyle(objectParam1) == 5)) {
				return "NPC_AISTYLE_JEDI_SUPPORT";
			}
			else {
				if ((GetNPCAIStyle(objectParam1) == 0)) {
					return "NPC_AISTYLE_DEFAULT_ATTACK";
				}
			}
		}
	}
	int nNPCStyle = GetNPCAIStyle(objectParam1);
	string string1 = IntToString(nNPCStyle);
	string1 = ("No Valid AI Set, state = " + string1);
	return string1;
}

void sub5() {
	talent talFeat;
	structGLOB_1.object1 = GetLastHostileTarget(OBJECT_SELF);
	structGLOB_1.int9 = GetIsDebilitated(structGLOB_1.object1);
	structGLOB_1.int1 = GetLastAttackAction(OBJECT_SELF);
	if ((structGLOB_1.int1 == 4)) {
		structGLOB_1.int3 = GetLastForcePowerUsed(OBJECT_SELF);
		structGLOB_1.int7 = GetWasForcePowerSuccessful(OBJECT_SELF);
		talFeat = TalentSpell(structGLOB_1.int3);
		structGLOB_1.int5 = GetCategoryFromTalent(talFeat);
	}
	else {
		if ((structGLOB_1.int1 == 3)) {
			structGLOB_1.int3 = GetLastCombatFeatUsed(OBJECT_SELF);
			structGLOB_1.int7 = GetLastAttackResult(OBJECT_SELF);
			talFeat = TalentFeat(structGLOB_1.int3);
			structGLOB_1.int5 = GetCategoryFromTalent(talFeat);
		}
	}
	structGLOB_1.int13 = GetLocalNumber(OBJECT_SELF, intGLOB_8);
	structGLOB_1.int15 = GetLocalNumber(OBJECT_SELF, intGLOB_7);
}

string sub4(object objectParam1) {
	string string1 = ((GetName(objectParam1) + "_") + ObjectToString(objectParam1));
	return string1;
}

void sub3(string stringParam1) {
	if ((!ShipBuild())) {
		PrintString(stringParam1);
	}
}

void sub2(int intParam1) {
	sub3("");
	sub3(("GENERIC DEBUG *************** START DETERMINE COMBAT ROUND " + sub4(OBJECT_SELF)));
	if ((IsObjectPartyMember(OBJECT_SELF) && GetCombatActionsPending(OBJECT_SELF))) {
		return;
	}
	sub5();
	{
		int nStyle = GetPartyAIStyle();
		int nNPCStyle = GetNPCAIStyle(OBJECT_SELF);
		sub3(("GENERIC DEBUG *************** AI STYLE = " + sub6(OBJECT_SELF)));
		if (((((!sub7(intGLOB_112)) && (!sub7(intGLOB_113))) && (!sub7(intGLOB_114))) && (!GetUserActionsPending()))) {
		if (((GetPartyMemberByIndex(0) != OBJECT_SELF) && (!GetPlayerRestrictMode(OBJECT_SELF)))) {
			if (((IsObjectPartyMember(OBJECT_SELF) && (!GetPlayerRestrictMode(OBJECT_SELF))) || (!IsObjectPartyMember(OBJECT_SELF)))) {
				if ((nNPCStyle == 2)) {
					if (GetIsObjectValid(intParam1)) {
						ClearAllActions();
						ActionAttack(intParam1, 0);
						return;
					}
					else {
						object oNearest = GetNearestCreature(3, 1, OBJECT_SELF, 1, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF);
						if (GetIsObjectValid(oNearest)) {
							ClearAllActions();
							ActionAttack(oNearest, 0);
							return;
						}
					}
					return;
				}
				if ((sub8() == 1)) {
					sub3("GENERIC DEBUG *************** Terminating AI from Shields");
					return;
				}
				if ((sub11() == 1)) {
					return;
				}
				if ((sub7(intGLOB_121) == 1)) {
					if ((sub12() == 1)) {
						return;
					}
				}
				if ((sub7(intGLOB_116) == 1)) {
					if ((sub13(intParam1) == 1)) {
						return;
					}
				}
				if ((nNPCStyle == 6)) {
					sub79(intParam1);
					return;
				}
				if ((nNPCStyle == 7)) {
					if (sub81(intParam1)) {
						return;
					}
				}
				if (((nNPCStyle == 0) || (nNPCStyle == 7))) {
					if ((sub33(intParam1) == 1)) {
						return;
					}
				}
				else {
					if ((nNPCStyle == 4)) {
						if ((sub82(intParam1) == 1)) {
							return;
						}
					}
					else {
						if ((nNPCStyle == 5)) {
							if ((sub83(10.0) == 1)) {
								return;
							}
							if ((sub84(intParam1) == 1)) {
								return;
							}
						}
						else {
							if ((nNPCStyle == 8)) {
								if ((sub88(intParam1) == 1)) {
									return;
								}
							}
							else {
								if ((nNPCStyle == 9)) {
									if ((sub33(intParam1) == 1)) {
										return;
									}
								}
								else {
									if ((nNPCStyle == 10)) {
										if ((sub83(5.0) == 1)) {
											return;
										}
										sub33(intParam1);
										return;
									}
									else {
										if ((nNPCStyle == 11)) {
											if ((sub83(10.0) == 1)) {
												return;
											}
											sub89(intParam1);
											return;
										}
										else {
											if ((nNPCStyle == 12)) {
												sub89(intParam1);
												return;
											}
											else {
												if ((nNPCStyle == 13)) {
													if (sub91(OBJECT_SELF)) {
														sub84(intParam1);
													}
													else {
														sub82(intParam1);
													}
													return;
												}
												else {
													if ((nNPCStyle == 14)) {
														if ((sub92(2.0) == 1)) {
															return;
														}
														sub93(intParam1);
														return;
													}
													else {
														if ((nNPCStyle == 15)) {
															if ((sub94(intParam1) == 1)) {
																return;
															}
															else {
																sub33(intParam1);
															}
														}
														else {
															if ((sub33(intParam1) == 1)) {
																return;
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
		}
		if (sub95()) {
			sub3("GENERIC DEBUG *************** DETERMINE COMBAT ROUND END");
		}
		sub3("GENERIC DEBUG *************** WARNING DETERMINE COMBAT ROUND FAILURE");
	}
}

void sub1(object objectParam1, int intParam2) {
	ChangeToStandardFaction(objectParam1, intParam2);
	AssignCommand(objectParam1, sub2(OBJECT_INVALID));
}

void main() {
	int nParam1 = GetScriptParameter(1);
	int int3;
	object oMp_crowd;
	switch (nParam1) {
		case 1:
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd_vaklu", int3);
				SetLocalBoolean(oMp_crowd, 40, 0);
				if (GetIsObjectValid(oMp_crowd)) {
					sub1(oMp_crowd, 1);
				}
				(int3++);
			}
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd", int3);
				SetLocalBoolean(oMp_crowd, 40, 0);
				if (GetIsObjectValid(oMp_crowd)) {
					sub1(oMp_crowd, 2);
				}
				(int3++);
			}
			sub1(GetObjectByTag("ponlar", 0), 1);
			sub1(GetObjectByTag("mp_psoldier", 0), 2);
			DelayCommand(15.0, sub103(0));
			break;
		case 2:
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd_vaklu", int3);
				SetLocalBoolean(oMp_crowd, 40, 0);
				if (GetIsObjectValid(oMp_crowd)) {
					sub1(oMp_crowd, 4);
				}
				(int3++);
			}
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd", int3);
				SetLocalBoolean(oMp_crowd, 40, 0);
				if (GetIsObjectValid(oMp_crowd)) {
					sub1(oMp_crowd, 2);
				}
				(int3++);
			}
			sub1(GetObjectByTag("ponlar", 0), 4);
			sub1(GetObjectByTag("mp_psoldier", 0), 2);
			DelayCommand(15.0, sub103(0));
			break;
		case 3:
			SetLocalBoolean(GetObjectByTag("wp_ponlar", 0), 41, 1);
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd_vaklu", int3);
				SetLocalBoolean(oMp_crowd, 40, 0);
				if (GetIsObjectValid(oMp_crowd)) {
					sub1(oMp_crowd, 2);
				}
				(int3++);
			}
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd", int3);
				SetLocalBoolean(oMp_crowd, 40, 0);
				if (GetIsObjectValid(oMp_crowd)) {
					sub1(oMp_crowd, 1);
				}
				(int3++);
			}
			sub1(GetObjectByTag("ponlar", 0), 2);
			sub1(GetObjectByTag("mp_psoldier", 0), 1);
			DelayCommand(15.0, sub103(1));
			break;
		case 4:
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd_vaklu", int3);
				if (GetIsObjectValid(oMp_crowd)) {
					SetLocalBoolean(oMp_crowd, 40, 0);
					DelayCommand(IntToFloat(Random(20)), sub104(oMp_crowd));
				}
				(int3++);
			}
			int3 = 0;
			while ((int3 <= 8)) {
				oMp_crowd = GetObjectByTag("mp_crowd", int3);
				if (GetIsObjectValid(oMp_crowd)) {
					SetLocalBoolean(oMp_crowd, 40, 0);
					DelayCommand(IntToFloat(Random(20)), sub104(oMp_crowd));
				}
				(int3++);
			}
			break;
		case 5:
			{
				int nParam2 = GetScriptParameter(2);
				SetLocalBoolean(OBJECT_SELF, nParam2, 0);
				object object17;
				int3 = 0;
				while ((int3 < 3)) {
				{
					string string1;
					oMp_crowd = GetObjectByTag("mp_crowd_vaklu", int3);
					string1 = (("wp_mobv" + IntToString((int3 + 1))) + "_spawn");
					AssignCommand(oMp_crowd, sub10(intGLOB_58, 0));
					AssignCommand(oMp_crowd, sub10(intGLOB_67, 0));
					AssignCommand(oMp_crowd, ClearAllActions());
					AssignCommand(oMp_crowd, ActionJumpToObject(GetObjectByTag(string1, 0), 1));
					string1 = (("wp_mobv" + IntToString((int3 + 1))) + "_walk");
					AssignCommand(oMp_crowd, ActionMoveToObject(GetObjectByTag(string1, 0), 0, 1.0));
					SetLocalBoolean(oMp_crowd, 40, 1);
				}
					(int3++);
				}
				int3 = 0;
				while ((int3 < 4)) {
				{
					string string4;
					oMp_crowd = GetObjectByTag("mp_crowd", int3);
					string4 = (("wp_mob" + IntToString((int3 + 1))) + "_spawn");
					AssignCommand(oMp_crowd, sub10(intGLOB_58, 0));
					AssignCommand(oMp_crowd, sub10(intGLOB_67, 0));
					AssignCommand(oMp_crowd, ClearAllActions());
					AssignCommand(oMp_crowd, ActionJumpToObject(GetObjectByTag(string4, 0), 1));
					string4 = (("wp_mob" + IntToString((int3 + 1))) + "_walk");
					AssignCommand(oMp_crowd, ActionMoveToObject(GetObjectByTag(string4, 0), 0, 1.0));
					SetLocalBoolean(oMp_crowd, 40, 1);
				}
					(int3++);
				}
			}
			break;
	}
}